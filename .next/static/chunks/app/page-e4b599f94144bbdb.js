(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4237:(e,t,a)=>{Promise.resolve().then(a.bind(a,7681))},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},7681:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>a3});var s=a(5155),r=a(2115);let n="echo_journal_entries",i="echo_thought_records",l="echo_daily_plans",o="echo_weekly_plans",c="echo_medications",d="echo_medication_logs",m="echo_theme",u="echo_palette",h="echo_medication_groups",x="echo_calendar_events",f="echo_profile_data",g=e=>{try{localStorage.setItem(n,JSON.stringify(e))}catch(e){console.error("Error saving journal entries to localStorage:",e)}},p=()=>{try{let e=localStorage.getItem(n);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading journal entries from localStorage:",e),[]}},v=e=>{let t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","echo_journal_backup_".concat(new Date().toISOString().slice(0,10),".json")),document.body.appendChild(a),a.click(),a.remove()},b=e=>{try{localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Error saving thought records to localStorage:",e)}},j=()=>{try{let e=localStorage.getItem(i);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading thought records from localStorage:",e),[]}},y=e=>{try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Error saving daily plans to localStorage:",e)}},N=()=>{try{let e=localStorage.getItem(l);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading daily plans from localStorage:",e),{}}},w=e=>{try{localStorage.setItem(o,JSON.stringify(e))}catch(e){console.error("Error saving weekly plans to localStorage:",e)}},k=()=>{try{let e=localStorage.getItem(o);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading weekly plans from localStorage:",e),{}}},C=e=>{try{localStorage.setItem(c,JSON.stringify(e))}catch(e){console.error("Error saving medications to localStorage:",e)}},S=()=>{try{let e=localStorage.getItem(c);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading medications from localStorage:",e),[]}},A=e=>{try{localStorage.setItem(d,JSON.stringify(e))}catch(e){console.error("Error saving medication logs to localStorage:",e)}},I=()=>{try{let e=localStorage.getItem(d);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading medication logs from localStorage:",e),[]}},D=e=>{try{localStorage.setItem(h,JSON.stringify(e))}catch(e){console.error("Error saving medication groups to localStorage:",e)}},T=()=>{try{let e=localStorage.getItem(h);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading medication groups from localStorage:",e),[]}},E=e=>{try{localStorage.setItem(x,JSON.stringify(e))}catch(e){console.error("Error saving calendar events to localStorage:",e)}},M=()=>{try{let e=localStorage.getItem(x);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading calendar events from localStorage:",e),[]}},_=e=>{try{localStorage.setItem(f,JSON.stringify(e))}catch(e){console.error("Error saving profile data to localStorage:",e)}},R=()=>{let e={planner:!0,medication:!0,copingMechanisms:!0,affirmations:!0};try{let t=localStorage.getItem(f);if(t){let a=JSON.parse(t);return a.dashboardWidgets={...e,...a.dashboardWidgets||{}},a.strengths=a.strengths||[],a.favoriteAffirmations=a.favoriteAffirmations||[],a}}catch(e){console.error("Error loading profile data from localStorage:",e)}return{name:"",strengths:[],copingMechanisms:[],dashboardWidgets:e,favoriteAffirmations:[]}},z=e=>{try{localStorage.setItem(u,e)}catch(e){console.error("Error saving palette to localStorage:",e)}},P=()=>{try{let e=localStorage.getItem(u);return"ocean"===e&&(e="buttercup",z("buttercup")),e||"echo"}catch(e){return console.error("Error loading palette from localStorage:",e),"echo"}};var O=a(1721),L=a(8341),F=a(6603),U=a(9434);let B=e=>{switch(e){case"filled":return"bg-primary text-primary-foreground shadow-sm";case"tonal":return"bg-secondary-container text-on-secondary-container shadow-sm";case"outlined":return"border border-outline bg-transparent text-primary hover:bg-primary-container/20";case"text":return"bg-transparent text-primary shadow-none";case"elevated":return"bg-surface-container-low shadow-md text-primary";default:return""}},W=e=>{let{children:t,variant:a="filled",size:n="md",className:i="",isIconOnly:l=!1,leadingIcon:o,trailingIcon:c,...d}=e,m={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},u=e=>{if(r.isValidElement(e)){let t=e.props.className||"",a=(0,U.cn)(t,m[n]);return r.cloneElement(e,{className:a})}return e};return(0,s.jsx)("button",{className:(0,U.cn)("\n    inline-flex items-center justify-center font-medium\n    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 \n    dark:focus-visible:ring-offset-surface-dark\n    disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none\n    transition-all duration-500 ease-in-out \n    hover:brightness-110 active:brightness-90\n    dark:hover:brightness-125 dark:active:brightness-90\n  ",{sm:"h-8 ".concat(l?"w-8 px-0":"text-label-md px-3"," rounded-full"),md:"h-10 ".concat(l?"w-10 px-0":"text-label-lg px-6"," rounded-full"),lg:"h-12 ".concat(l?"w-12 px-0":"text-label-lg px-8"," rounded-full")}[n],B(a),i),...d,children:l?u(o||t):(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)("span",{className:"mr-2",children:u(o)}),t,c&&(0,s.jsx)("span",{className:"ml-2",children:u(c)})]})})},q=[{label:"Dashboard",view:"dashboard","aria-label":"Navigate to Dashboard"},{label:"Journal",view:"journal","aria-label":"Navigate to Journal page"},{label:"Planner",view:"planner","aria-label":"Navigate to Planner and Calendar page"},{label:"Thought Record",view:"thoughtRecord","aria-label":"Navigate to Thought Record page"},{label:"Affirmations",view:"affirmations","aria-label":"Navigate to Affirmations page"},{label:"Med Tracker",view:"medication","aria-label":"Navigate to Med Tracker page"},{label:"Resources",view:"resources","aria-label":"Navigate to Resources Page"}],Y=[{label:"Profile",view:"profile",icon:(0,s.jsx)(O.A,{className:"w-5 h-5"}),"aria-label":"Navigate to Profile & Settings Page"}],J=(e,t)=>"journal"===t?e.startsWith("journal"):"thoughtRecord"===t?e.startsWith("thoughtRecord"):"resources"===t?e.startsWith("resources")||"understanding-cbt"===e||"crisis-support"===e:e===t,H=e=>{let{onToggleDrawer:t,onNavigateToView:a,currentView:r,desktopAudioPlayer:n}=e;return(0,s.jsx)("nav",{className:"bg-surface-container shadow-md sticky top-0 z-40 h-20",children:(0,s.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 flex items-center justify-between h-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)(W,{onClick:t,variant:"text",size:"md",isIconOnly:!0,title:"Open navigation menu","aria-label":"Open navigation menu",className:"text-primary",leadingIcon:(0,s.jsx)(L.A,{className:"w-6 h-6"})})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer p-2 rounded-lg transition-opacity duration-200 ease-in-out hover:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-container",onClick:()=>{a("dashboard")},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a("dashboard"))},role:"button",tabIndex:0,"aria-label":"echo - Navigate to Dashboard",children:[(0,s.jsx)(F.A,{className:"w-7 h-7 text-primary"}),(0,s.jsx)("h1",{className:"font-geologica font-medium text-2xl text-primary hidden sm:block",children:"echo"})]})]}),(0,s.jsx)("div",{className:"hidden md:flex items-center h-full gap-4",children:q.map(e=>{let t=J(r,e.view);return(0,s.jsx)("button",{onClick:()=>a(e.view),"aria-label":e["aria-label"],"aria-current":t?"page":void 0,className:(0,U.cn)("h-full inline-flex items-center px-3 border-b-2 text-sm font-medium transition-colors duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-background",t?"border-primary text-primary":"border-transparent text-surface-on-variant hover:text-primary"),children:e.label},e.view)})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[n,(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-1",children:[(0,s.jsx)("div",{className:"h-6 w-px bg-outline-variant mx-2"}),Y.map(e=>{let t=J(r,e.view);return(0,s.jsx)(W,{variant:"text",size:"md",isIconOnly:!0,title:e.label,onClick:()=>a(e.view),className:(0,U.cn)("text-surface-on-variant hover:bg-surface-on-variant/10",t&&"text-primary bg-primary-container/40"),"aria-label":e["aria-label"],"aria-current":t?"page":void 0,children:e.icon},e.view)})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)(W,{onClick:()=>a("profile"),variant:"text",size:"md",isIconOnly:!0,title:"View Profile","aria-label":"View your profile",className:"text-primary",leadingIcon:(0,s.jsx)(O.A,{className:"w-6 h-6"})})})]})]})})};var V=a(8186),G=a(5222),K=a(1920),X=a(9272),Z=a(3089),$=a(2011),Q=a(7270),ee=a(5318);let et=[{label:"Dashboard",view:"dashboard",icon:(0,s.jsx)(V.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Dashboard"},{label:"Journal",view:"journal",icon:(0,s.jsx)(G.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Journal page"},{label:"Planner",view:"planner",icon:(0,s.jsx)(K.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Planner and Calendar page"},{label:"Thought Record",view:"thoughtRecord",icon:(0,s.jsx)(X.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Thought Record page"},{label:"Affirmations",view:"affirmations",icon:(0,s.jsx)(Z.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Affirmations page"},{label:"Med Tracker",view:"medication",icon:(0,s.jsx)($.A,{className:"w-6 h-6 transform rotate-90"}),"aria-label":"Navigate to Med Tracker page"},{label:"Resources",view:"resources",icon:(0,s.jsx)(Q.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Resources Page"}],ea=[{label:"Profile & Settings",view:"profile",icon:(0,s.jsx)(O.A,{className:"w-6 h-6"}),"aria-label":"Navigate to Profile & Settings Page"}],es=e=>{let{isOpen:t,onClose:a,onNavigateToView:n,currentView:i}=e,[l,o]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{let e,a,s;return t?(o(!0),e=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{d(!0)})})):(d(!1),s=window.setTimeout(()=>{o(!1)},1e3)),()=>{cancelAnimationFrame(e),cancelAnimationFrame(a),clearTimeout(s)}},[t]),!l)return null;let m=e=>"journal"===e?i.startsWith("journal"):"thoughtRecord"===e?i.startsWith("thoughtRecord"):"resources"===e?i.startsWith("resources")||"understanding-cbt"===i||"crisis-support"===i:i===e,u=e=>{let{item:t,isActive:r}=e;return(0,s.jsx)(W,{variant:r?"tonal":"text",size:"lg",className:"w-full justify-start ".concat(r?"text-primary bg-primary-container/30":"text-surface-on hover:bg-surface-container"),leadingIcon:t.icon,onClick:()=>{n(t.view),a()},"aria-label":t["aria-label"],"aria-current":r?"page":void 0,children:t.label})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"\n          fixed inset-0 z-40 bg-scrim/60 backdrop-blur-sm \n          transition-opacity ease-[cubic-bezier(0.16,1,0.3,1)] duration-[1000ms]\n          md:hidden \n          ".concat(c&&t?"opacity-100":"opacity-0","\n        "),onClick:a,"aria-hidden":"true"}),(0,s.jsx)("aside",{className:"\n          fixed top-0 left-0 z-50 w-72 sm:w-80 h-full \n          bg-surface-container-highest shadow-xl \n          transform transition-transform ease-[cubic-bezier(0.16,1,0.3,1)] duration-[1000ms]\n          md:hidden \n          ".concat(c&&t?"translate-x-0":"-translate-x-full","\n        "),role:"dialog","aria-modal":"true","aria-labelledby":"sidebar-title",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"relative flex items-center justify-center p-4 border-b border-outline-variant h-20",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F.A,{className:"w-7 h-7 text-primary"}),(0,s.jsx)("h2",{id:"sidebar-title",className:"font-geologica font-medium text-2xl text-primary",children:"echo"})]}),(0,s.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)(W,{variant:"text",size:"sm",isIconOnly:!0,onClick:a,className:"text-surface-on-variant hover:bg-surface-on-variant/10","aria-label":"Close navigation menu",children:(0,s.jsx)(ee.A,{className:"w-6 h-6"})})})]}),(0,s.jsxs)("nav",{className:"flex-grow p-6 space-y-3 overflow-y-auto",children:[et.map(e=>(0,s.jsx)(u,{item:e,isActive:m(e.view)},e.view)),(0,s.jsx)("hr",{className:"my-3 border-outline-variant"}),ea.map(e=>(0,s.jsx)(u,{item:e,isActive:m(e.view)},e.view))]}),(0,s.jsx)("div",{className:"p-6 border-t border-outline-variant",children:(0,s.jsxs)("p",{className:"text-label-sm text-center text-surface-on-variant",children:["echo \xa9 ",new Date().getFullYear()]})})]})})]})};var er=a(6578),en=a(6936),ei=a(8027);let el=()=>{let[e,t]=(0,r.useState)({greeting:"Hello",Icon:er.A,formattedDate:""});(0,r.useEffect)(()=>{let e=new Date,a="Hello",s=er.A,r=e.getHours();r<12?(a="Good Morning",s=en.A):r<18?(a="Good Afternoon",s=er.A):(a="Good Evening",s=ei.A),t({greeting:a,Icon:s,formattedDate:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})},[]);let{greeting:a,Icon:n,formattedDate:i}=e;return(0,s.jsx)("div",{className:"bg-primary-container p-8 rounded-2xl shadow-lg text-on-primary-container",children:(0,s.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-start gap-4",children:(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(n,{size:48,className:"opacity-70 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"font-serif text-headline-md sm:text-headline-lg",children:[a,"!"]}),(0,s.jsx)("p",{className:"text-title-md sm:text-title-lg opacity-90 min-h-[1.75rem]",children:i})]})]}),(0,s.jsx)("p",{className:"text-body-lg mt-4 opacity-80 max-w-2xl",children:"Welcome back. Capture your thoughts, organize your day, and reflect on your well-being."})]})})})};var eo=a(1203),ec=a(3223),ed=a(4214);let em=e=>{let{todaysGoals:t,selectedDate:a,onNavigate:n,totalGoalsToday:i,completedGoalsToday:l}=e,[o,c]=(0,r.useState)("");return(0,r.useEffect)(()=>{c(a.toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric"}))},[a]),(0,s.jsxs)("div",{className:"bg-surface-container-low p-8 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between h-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eo.A,{className:"w-7 h-7 text-secondary"}),(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on",children:"Today's Goals"})]}),i>0&&(0,s.jsxs)("span",{className:"text-xs font-medium px-2 py-0.5 bg-secondary-container text-on-secondary-container rounded-full",children:[l,"/",i," done"]})]}),(0,s.jsx)("p",{className:"text-label-lg text-surface-on-variant mb-3 min-h-[1.25rem]",children:o}),t.length>0?(0,s.jsx)("ul",{className:"space-y-2 mb-4 max-h-32 overflow-y-auto",children:t.map(e=>(0,s.jsxs)("li",{className:"flex items-center p-2 bg-surface rounded-md",children:[(0,s.jsx)(ec.A,{className:"w-4 h-4 mr-2 flex-shrink-0 ".concat(e.completed?"text-secondary":"text-outline-variant")}),(0,s.jsx)("span",{className:"text-body-sm text-surface-on truncate ".concat(e.completed?"line-through text-surface-on-variant":""),title:e.text,children:e.text})]},e.id))}):(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:"No specific goals set for today. Plan your day!"})]}),(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(ed.A,{}),onClick:()=>n("planner"),"aria-label":"Open Goal Tracker page",className:"w-full mt-auto",children:"View Today's Focus"})]})};var eu=a(8271);let eh=e=>{let{medicationsCount:t,medicationGroupsCount:a,onNavigate:r}=e;return(0,s.jsxs)("div",{className:"bg-surface-container-low p-8 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between h-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)($.A,{className:"w-7 h-7 text-error transform rotate-90"}),(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on",children:"Medication"})]})}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-2.5 bg-surface rounded-lg",children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on",children:"Tracked Medications:"}),(0,s.jsx)("span",{className:"font-semibold text-primary",children:t})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-2.5 bg-surface rounded-lg",children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on",children:"Medication Bundles:"}),(0,s.jsx)("span",{className:"font-semibold text-secondary",children:a})]})]}),0===t&&(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:"Add your medications to start tracking."})]}),(0,s.jsx)(W,{variant:"filled",style:{backgroundColor:"var(--error-container)",color:"var(--on-error-container)"},size:"md",leadingIcon:(0,s.jsx)(eu.A,{}),onClick:()=>r("medication"),"aria-label":"Manage medications and view log",className:"w-full mt-auto",children:"Manage Medications"})]})};var ex=a(9722),ef=a(7554),eg=a(4301);function ep(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,U.cn)("animate-pulse rounded-md bg-muted",t),...a})}let ev=e=>{let{copingMechanisms:t,onNavigate:a,className:n=""}=e,[i,l]=r.useState(null),[o,c]=r.useState(!1);return r.useEffect(()=>{c(!0)},[]),r.useEffect(()=>{o&&t.length>0?l(t[Math.floor(Math.random()*t.length)]):l(null)},[o,t]),(0,s.jsxs)("div",{className:"bg-surface-container-low p-8 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between h-full ".concat(n),children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)(ex.A,{className:"w-7 h-7 text-green-500"}),(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on",children:"My Coping Strategies"})]}),o?i?(0,s.jsx)("div",{className:"mb-4 p-4 bg-surface rounded-lg min-h-[80px] flex items-center justify-center text-center",children:(0,s.jsxs)("p",{className:"text-body-lg font-medium text-surface-on",children:['"',i.text,'"']})}):(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:"Add your personal coping mechanisms in your profile to see them here."}):(0,s.jsx)(ep,{className:"h-[80px] w-full"})]}),(0,s.jsxs)("div",{className:"mt-auto grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.length>0?(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(ef.A,{}),onClick:()=>{if(t.length>1){let e=i;for(;e&&e.id===(null==i?void 0:i.id);)e=t[Math.floor(Math.random()*t.length)];l(e)}},"aria-label":"Show another coping mechanism",className:"w-full",disabled:!o||t.length<2,children:"Show Another"}):(0,s.jsx)(W,{variant:"filled",size:"md",leadingIcon:(0,s.jsx)(eg.A,{}),onClick:()=>a("profile"),"aria-label":"Add coping mechanisms",className:"w-full sm:col-span-2",children:"Add Mechanisms"}),t.length>0&&(0,s.jsx)(W,{variant:"filled",size:"md",leadingIcon:(0,s.jsx)(O.A,{}),onClick:()=>a("profile"),"aria-label":"Manage your coping mechanisms",className:"w-full",children:"Manage"})]})]})};var eb=a(8046),ej=a(760),ey=a(1978);let eN=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,U.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});eN.displayName="Input";var ew=a(7481);let ek=e=>{let{profileData:t,onUpdateProfile:a,onNavigate:n,className:i=""}=e,[l,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),{toast:h}=(0,ew.dj)(),x=(null==t?void 0:t.favoriteAffirmations)||[];(0,r.useEffect)(()=>{u(!0)},[]),(0,r.useEffect)(()=>{if(x.length>1){let e=setInterval(()=>{o(e=>(e+1)%x.length)},7e3);return()=>clearInterval(e)}},[x.length]);let f=()=>{if(!c.trim())return;let e=[...x,c.trim()];a({...t,favoriteAffirmations:e}),d(""),h({title:"Custom affirmation added!"})};if(!m)return(0,s.jsx)(ep,{className:"bg-surface-container-low p-8 rounded-xl h-[230px] ".concat(i)});let g=x&&x.length>0;return(0,s.jsxs)("div",{className:"bg-surface-container-low p-8 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col justify-between h-full ".concat(i),children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)(Z.A,{className:"w-7 h-7 text-yellow-500"}),(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on",children:"My Affirmations"})]}),(0,s.jsx)("div",{className:"mb-4 p-4 bg-surface rounded-lg min-h-[80px] flex items-center justify-center text-center",children:g?(0,s.jsx)(ej.N,{mode:"wait",children:(0,s.jsxs)(ey.P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},className:"text-body-lg font-medium text-surface-on",children:['"',x[l],'"']},l)}):(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant",children:"Add or favorite some affirmations to see them here."})})]}),(0,s.jsxs)("div",{className:"mt-auto space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(eN,{type:"text",placeholder:"Write your own affirmation...",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&f(),className:"h-10 bg-surface border-outline-variant"}),(0,s.jsx)(W,{variant:"tonal",size:"md",isIconOnly:!0,onClick:f,disabled:!c.trim(),title:"Add Custom Affirmation",children:(0,s.jsx)(eb.A,{})})]}),(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(eg.A,{}),onClick:()=>n("affirmations"),"aria-label":"Find more affirmations to favorite",className:"w-full",children:g?"Manage & Find More":"Find Affirmations"})]})]})},eC=e=>e.toISOString().split("T")[0],eS=e=>{var t,a,n;let{dailyPlans:i,medications:l,medicationGroups:o,profileData:c,onUpdateProfile:d,onNavigateToView:m}=e,[u,h]=(0,r.useState)(null);if((0,r.useEffect)(()=>{h(new Date)},[]),!u)return(0,s.jsxs)("div",{className:"space-y-8 lg:space-y-10 animate-in fade-in-0 duration-750",children:[(0,s.jsx)(ep,{className:"h-[168px] w-full rounded-2xl"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-10",children:[(0,s.jsx)(ep,{className:"h-[230px] w-full rounded-xl"}),(0,s.jsx)(ep,{className:"h-[230px] w-full rounded-xl"}),(0,s.jsx)(ep,{className:"h-[180px] w-full rounded-xl"}),(0,s.jsx)(ep,{className:"h-[180px] w-full rounded-xl"})]})]});let{dashboardWidgets:x}=c,f=i[eC(u)],g=(null==f||null==(t=f.goals)?void 0:t.filter(e=>!e.completed).slice(0,3))||[],p=(null==f||null==(a=f.goals)?void 0:a.length)||0,v=(null==f||null==(n=f.goals)?void 0:n.filter(e=>e.completed).length)||0;return(0,s.jsxs)("div",{className:"space-y-8 lg:space-y-10 animate-in fade-in-0 duration-750",children:[(0,s.jsx)(el,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-10",children:[(null==x?void 0:x.planner)&&(0,s.jsx)(em,{todaysGoals:g,selectedDate:u,onNavigate:m,totalGoalsToday:p,completedGoalsToday:v}),(null==x?void 0:x.affirmations)&&(0,s.jsx)(ek,{profileData:c,onUpdateProfile:d,onNavigate:m}),(null==x?void 0:x.medication)&&(0,s.jsx)(eh,{medicationsCount:l.length,medicationGroupsCount:o.length,onNavigate:m}),(null==x?void 0:x.copingMechanisms)&&(0,s.jsx)(ev,{copingMechanisms:c.copingMechanisms,onNavigate:m})]})]})};var eA=a(2448),eI=a(6273),eD=a(9119);let eT=window.SpeechRecognition||window.webkitSpeechRecognition,eE=e=>{let{onTranscriptUpdate:t,onAudioRecorded:a,lang:s="en-US"}=e,[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),c=(0,r.useRef)(null),d=(0,r.useRef)(null),m=(0,r.useRef)([]),u=(0,r.useRef)(null),h=(0,r.useRef)(null),x=!!eT&&!!navigator.mediaDevices&&!!navigator.mediaDevices.getUserMedia,f=(0,r.useCallback)(()=>{if(u.current&&(u.current.getTracks().forEach(e=>e.stop()),u.current=null),d.current&&"inactive"!==d.current.state)try{d.current.stop()}catch(e){}if(d.current=null,c.current)try{c.current.stop()}catch(e){}c.current=null,m.current=[],h.current&&(h.current.abort(),h.current=null)},[]);(0,r.useEffect)(()=>()=>{f()},[f]);let g=()=>{eT&&(c.current=new eT,c.current.continuous=!0,c.current.interimResults=!0,c.current.lang=s,c.current.onresult=e=>{let a="",s="";for(let t=e.resultIndex;t<e.results.length;++t)e.results[t].isFinal?s+=e.results[t][0].transcript:a+=e.results[t][0].transcript;s&&t(s,!0),a&&t(a,!1)},c.current.onerror=e=>{console.error("Speech recognition error:",e.error,e.message),o("Speech error: ".concat(e.error,". ").concat(e.message||"Check console."))})},p=e=>{let t={mimeType:"audio/webm"};!MediaRecorder.isTypeSupported(t.mimeType)&&(t={mimeType:"audio/ogg; codecs=opus"},MediaRecorder.isTypeSupported(t.mimeType)||(t={mimeType:""})),d.current=new MediaRecorder(e,t.mimeType?t:void 0),m.current=[],d.current.ondataavailable=e=>{e.data.size>0&&m.current.push(e.data)},d.current.onstop=()=>{if(m.current.length>0&&a){var e;let t=new Blob(m.current,{type:(null==(e=d.current)?void 0:e.mimeType)||"audio/webm"}),s=new FileReader;h.current=s,s.onloadend=()=>{h.current===s&&(a&&a(s.result),h.current=null)},s.onerror=e=>{console.error("FileReader error:",e),o("Failed to process recorded audio."),h.current=null},s.onabort=()=>{console.log("Audio processing cancelled."),o(null),h.current=null},s.readAsDataURL(t)}m.current=[]},d.current.onerror=e=>{console.error("MediaRecorder error:",e),o("Audio recording error. Check console.")}},v=(0,r.useCallback)(async()=>{if(f(),!x)return void o("Speech or media recording is not supported.");if(!n){o(null);try{u.current=await navigator.mediaDevices.getUserMedia({audio:!0}),g(),a&&p(u.current),c.current&&c.current.start(),d.current&&d.current.start(),i(!0)}catch(e){console.error("Error starting recording:",e),"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?o("Microphone access denied. Please allow permissions."):"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?o("No microphone found. Please connect a microphone."):o("Mic/Setup error: ".concat(e.message||"Unknown error")),f(),i(!1)}}},[n,x,s,t,a,f]),b=(0,r.useCallback)(()=>{n&&(f(),i(!1))},[n,f]);return{isRecording:n,startRecording:v,stopRecording:b,cancelProcessing:(0,r.useCallback)(()=>{h.current&&h.current.abort()},[]),speechError:l,isSpeechSupported:x}},eM=e=>{let{onSave:t,onClose:a,initialEntry:n}=e,[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)(void 0),[d,m]=(0,r.useState)("Ready to record"),[u,h]=(0,r.useState)(!1),x=(0,r.useRef)(null),{isRecording:f,startRecording:g,stopRecording:p,cancelProcessing:v,speechError:b,isSpeechSupported:j}=eE({onTranscriptUpdate:(0,r.useCallback)((e,t)=>{x.current&&t&&(x.current.classList.contains("placeholder-active")&&(x.current.textContent="",x.current.classList.remove("placeholder-active")),x.current.textContent&&!x.current.textContent.endsWith(" ")&&(x.current.textContent+=" "),x.current.textContent+=e.trim()+" ")},[]),onAudioRecorded:e=>{c(e),h(!1)}});(0,r.useEffect)(()=>{if(n){if(l(n.title||""),c(n.audioBase64DataUrl),x.current){var e;x.current.innerHTML=n.text||"",(null==(e=x.current.textContent)?void 0:e.trim())&&x.current.classList.remove("placeholder-active")}}else l(""),c(void 0),x.current&&(x.current.innerHTML="",x.current.classList.add("placeholder-active"))},[n]);let y=()=>{f?(h(!0),p()):g()},N=()=>{v(),h(!1)};return(0,r.useEffect)(()=>{j?b?(m(b),h(!1)):f?(m("Recording... Speak now."),h(!1)):u?m("Processing..."):m("Ready to record"):m("Speech recognition not supported by your browser.")},[f,u,b,j]),(0,s.jsxs)("div",{className:"flex flex-col h-full bg-surface",children:[(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-outline-variant md:max-w-3xl md:mx-auto md:w-full",children:[(0,s.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Untitled Note",className:"flex-grow bg-transparent text-headline-sm font-serif text-surface-on focus:outline-none"}),(0,s.jsx)(W,{onClick:a,variant:"text",size:"sm",isIconOnly:!0,"aria-label":"Close",children:(0,s.jsx)(ee.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"flex-grow flex flex-col min-h-0 md:max-w-3xl md:mx-auto md:w-full",children:[(0,s.jsx)("div",{className:"flex-grow p-4 md:p-6 overflow-y-auto min-h-0",children:(0,s.jsx)("div",{ref:x,contentEditable:!0,className:"prose prose-sm sm:prose-base dark:prose-invert max-w-none focus:outline-none h-full placeholder-active:text-surface-on-variant/80","data-placeholder":"Start typing or use the microphone to dictate your thoughts...",onInput:e=>{var t;let a=e.currentTarget;(null==(t=a.textContent)?void 0:t.trim())?a.classList.remove("placeholder-active"):a.classList.add("placeholder-active")}})}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex flex-col items-center justify-center p-4 border-t border-outline-variant space-y-3",children:[(0,s.jsx)("div",{className:"text-label-md text-surface-on-variant h-4",children:d}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsx)(W,{onClick:()=>{l(""),x.current&&(x.current.innerHTML="",x.current.classList.add("placeholder-active")),c(void 0),f&&p(),h(!1),m("Ready to record")},variant:"tonal",size:"md",isIconOnly:!0,title:"New Note / Clear",children:(0,s.jsx)(eA.A,{className:"w-5 h-5"})}),(0,s.jsxs)("button",{onClick:()=>{u?N():y()},disabled:!j,className:(0,U.cn)("relative w-20 h-20 rounded-full flex items-center justify-center transition-all duration-300","bg-surface-container border border-outline-variant shadow-lg hover:scale-105",(f||u)&&"bg-destructive border-transparent",!j&&"opacity-50 cursor-not-allowed"),"aria-label":u?"Cancel Processing":f?"Stop Recording":"Start Recording",children:[(0,s.jsxs)("div",{className:(0,U.cn)(f||u?"text-white":"text-surface-on"),children:[(0,s.jsx)(eI.A,{className:(0,U.cn)("w-8 h-8 transition-opacity duration-300",f||u?"opacity-0":"opacity-100")}),(0,s.jsx)("div",{className:(0,U.cn)("absolute inset-0 flex items-center justify-center transition-opacity duration-300",f?"opacity-100":"opacity-0"),children:(0,s.jsx)("div",{className:"w-6 h-6 bg-white rounded-sm"})}),(0,s.jsx)("div",{className:(0,U.cn)("absolute inset-0 flex items-center justify-center transition-opacity duration-300",u?"opacity-100":"opacity-0"),children:(0,s.jsx)(ee.A,{className:"w-8 h-8"})})]}),f&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsxs)("svg",{className:"w-48 h-48",viewBox:"0 0 200 200",children:[(0,s.jsx)("circle",{className:"wave animate-wave",cx:"100",cy:"100",r:"40"}),(0,s.jsx)("circle",{className:"wave animate-wave [animation-delay:0.4s]",cx:"100",cy:"100",r:"70"}),(0,s.jsx)("circle",{className:"wave animate-wave [animation-delay:0.8s]",cx:"100",cy:"100",r:"100"})]})})]}),(0,s.jsx)(W,{onClick:()=>{var e;t({title:i.trim()||"Journal Entry - ".concat(new Date().toLocaleDateString()),text:(null==(e=x.current)?void 0:e.innerHTML)||"",audioBase64DataUrl:o})},variant:"filled",size:"md",isIconOnly:!0,title:"Save Note",children:(0,s.jsx)(eD.A,{className:"w-5 h-5"})})]})]})]})]})};var e_=a(4347),eR=a(3129),ez=a(7223);let eP=e=>{let{entry:t,onView:a,onEdit:r,onDelete:n,isPlaceholder:i=!1}=e,l=i?"Just now":new Date(t.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),o=t.text.replace(/<[^>]+>/g,""),c=o.length>200?o.substring(0,200)+"...":o;return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl transition-all duration-300 hover:shadow-xl flex items-stretch w-full",children:[(0,s.jsxs)("div",{onClick:()=>!i&&a(t),className:"flex-grow p-5 sm:p-6 cursor-pointer","aria-label":"View entry: ".concat(t.title||"Journal Entry"),children:[(0,s.jsx)("h3",{className:"font-serif text-title-lg text-surface-on mb-0.5 break-words",children:t.title}),(0,s.jsx)("p",{className:"text-label-md text-surface-on-variant",children:l}),t.audioBase64DataUrl&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-primary",children:[(0,s.jsx)(e_.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-label-md",children:"Audio entry attached"})]}),o.trim()&&(0,s.jsx)("div",{className:"text-body-md text-surface-on max-w-none mt-2 break-words",children:c}),!o.trim()&&t.audioBase64DataUrl&&(0,s.jsx)("p",{className:"text-label-md text-surface-on-variant italic mt-2",children:"This entry primarily contains audio."})]}),!i&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2 p-2 border-l border-outline-variant/30",children:[(0,s.jsx)(W,{onClick:e=>{e.stopPropagation(),r(t)},variant:"text",size:"sm",isIconOnly:!0,title:"Edit Entry",className:"text-surface-on-variant hover:bg-surface-on-variant/10","aria-label":"Edit this journal entry",children:(0,s.jsx)(eR.A,{className:"w-5 h-5"})}),(0,s.jsx)(W,{onClick:e=>{e.stopPropagation(),n(t.id)},variant:"text",size:"sm",isIconOnly:!0,title:"Delete Entry",className:"text-error hover:bg-error-container/20","aria-label":"Delete this journal entry",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]})]})},eO=e=>{let{entries:t,onViewEntry:a,onEdit:r,onDelete:n}=e;if(0===t.length){let e={id:"placeholder",timestamp:Date.now(),title:"Your First Entry Awaits",text:"This is where your journal entries will appear. Click the '+' button below to capture your thoughts, reflections, and daily moments."};return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center text-center py-8 animate-in fade-in-0 duration-1000",children:(0,s.jsx)("div",{className:"max-w-2xl w-full",children:(0,s.jsx)(eP,{entry:e,onView:()=>{},onEdit:()=>{},onDelete:()=>{},isPlaceholder:!0})})})}return(0,s.jsx)("div",{className:"space-y-6 max-w-2xl w-full",children:t.map(e=>(0,s.jsx)(eP,{entry:e,onView:a,onEdit:r,onDelete:n},e.id))})};var eL=a(5668);let eF=eL.bL;eL.l9;let eU=eL.ZL;eL.bm;let eB=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eL.hJ,{ref:t,className:(0,U.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});eB.displayName=eL.hJ.displayName;let eW=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(eU,{children:[(0,s.jsx)(eB,{}),(0,s.jsxs)(eL.UC,{ref:t,className:(0,U.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(eL.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(ee.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eW.displayName=eL.UC.displayName;let eq=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,U.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};eq.displayName="DialogHeader";let eY=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eL.hE,{ref:t,className:(0,U.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});eY.displayName=eL.hE.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eL.VY,{ref:t,className:(0,U.cn)("text-sm text-muted-foreground",a),...r})}).displayName=eL.VY.displayName;let eJ=e=>{let{isOpen:t,onClose:a,title:r,children:n,contentClassName:i,containerClassName:l}=e;return(0,s.jsx)(eF,{open:t,onOpenChange:e=>{e||a()},children:(0,s.jsxs)(eW,{className:(0,U.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-surface-container shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),children:[r?(0,s.jsx)(eq,{className:"px-6 pt-6 text-left -mb-4",children:(0,s.jsx)(eY,{className:"font-serif text-headline-sm text-surface-on",children:r})}):(0,s.jsx)(eq,{className:"sr-only",children:(0,s.jsx)(eY,{children:"Dialog"})}),(0,s.jsx)("div",{className:(0,U.cn)("text-body-md text-surface-on-variant",{"-mt-12":!r},i),children:n})]})})},eH=e=>{let{isOpen:t,onClose:a,entry:r,onEdit:n}=e;if(!r)return null;let i=new Date(r.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return(0,s.jsxs)(eJ,{isOpen:t,onClose:a,title:r.title||"Journal Entry",children:[(0,s.jsxs)("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[(0,s.jsx)("p",{className:"text-sm text-surface-on-variant mb-4",children:i}),r.audioBase64DataUrl&&(0,s.jsxs)("div",{className:"my-4 p-4 bg-surface-container rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(e_.A,{className:"w-5 h-5 text-primary mr-2 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-label-md text-surface-on font-medium",children:"Play Dictated Audio"})]}),(0,s.jsx)("audio",{controls:!0,src:r.audioBase64DataUrl,className:"w-full h-10 rounded-md",children:"Your browser does not support the audio element."})]}),r.text.trim()&&(0,s.jsx)("div",{className:"prose prose-sm sm:prose-base dark:prose-invert max-w-none break-words",dangerouslySetInnerHTML:{__html:r.text}}),!r.text.trim()&&r.audioBase64DataUrl&&(0,s.jsx)("p",{className:"text-label-md text-surface-on-variant italic mt-2",children:"This entry primarily contains audio."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-outline-variant",children:[(0,s.jsx)(W,{type:"button",variant:"text",onClick:a,children:"Close"}),(0,s.jsx)(W,{type:"button",variant:"filled",leadingIcon:(0,s.jsx)(eR.A,{}),onClick:()=>{n(r),a()},children:"Edit Entry"})]})]})},eV=e=>{let{record:t,onView:a,onEdit:r,onDelete:n}=e,i=new Date(t.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),l=t.data.situation.length>150?t.data.situation.substring(0,150)+"...":t.data.situation;return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl transition-all duration-300 hover:shadow-xl flex items-stretch w-full",children:[(0,s.jsxs)("div",{onClick:()=>a(t),className:"flex-grow p-5 sm:p-6 cursor-pointer","aria-label":"View record: ".concat(t.title),children:[(0,s.jsx)("h3",{className:"font-serif text-title-lg text-surface-on mb-0.5 break-words",children:t.title}),(0,s.jsx)("p",{className:"text-label-md text-surface-on-variant",children:i}),(0,s.jsx)("div",{className:"text-body-md text-surface-on max-w-none mt-2 break-words",children:(0,s.jsxs)("p",{className:"italic text-surface-on-variant",children:['Situation: "',l,'"']})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2 p-2 border-l border-outline-variant/30",children:[(0,s.jsx)(W,{onClick:e=>{e.stopPropagation(),r(t)},variant:"text",size:"sm",isIconOnly:!0,title:"Edit Record",className:"text-surface-on-variant hover:bg-surface-on-variant/10","aria-label":"Edit this thought record",children:(0,s.jsx)(eR.A,{className:"w-5 h-5"})}),(0,s.jsx)(W,{onClick:e=>{e.stopPropagation(),n(t.id)},variant:"text",size:"sm",isIconOnly:!0,title:"Delete Record",className:"text-error hover:bg-error-container/20","aria-label":"Delete this thought record",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]})]})},eG=e=>{let{thoughtRecords:t,onNew:a,onView:r,onEdit:n,onDelete:i}=e;return(0,s.jsxs)("div",{className:"space-y-10 animate-in fade-in-0 duration-750 max-w-3xl w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(X.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"My Thought Records"})]}),(0,s.jsx)(W,{variant:"filled",size:"md",leadingIcon:(0,s.jsx)(eg.A,{}),onClick:a,className:"w-full sm:w-auto","aria-label":"Create new thought record",children:"New Thought Record"})]}),(0,s.jsx)("p",{className:"text-body-lg text-surface-on-variant -mt-6",children:"Use this structured exercise to examine and challenge unhelpful thoughts. Track your progress by reviewing past records."}),t.length>0?(0,s.jsx)("div",{className:"space-y-6",children:t.map(e=>(0,s.jsx)(eV,{record:e,onView:r,onEdit:n,onDelete:i},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12 bg-surface-container-low rounded-xl",children:[(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on",children:"No Records Yet"}),(0,s.jsx)("p",{className:"mt-2 text-body-md text-surface-on-variant",children:'Click "New Thought Record" to get started.'})]})]})};var eK=a(4633),eX=a(2543),eZ=a(9968),e$=a(5313);let eQ=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(e$.bL,{ref:t,className:(0,U.cn)("relative flex w-full touch-none select-none items-center group py-2",a),...r,children:[(0,s.jsx)(e$.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary-container",children:(0,s.jsx)(e$.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(e$.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});eQ.displayName=e$.bL.displayName;var e0=a(5109),e1=a(8292),e2=a(7360),e4=a(9193),e5=a(9294),e3=a(3609),e6=a(2086),e8=a(2235),e7=a(7976),e9=a(1462),te=a(6438),tt=a(2728),ta=a(4982),ts=a(28),tr=a(2085);let tn=(0,tr.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),ti=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,...i}=e;return(0,s.jsx)(ts.b,{ref:t,className:(0,U.cn)(tn({variant:r,size:n,className:a})),...i})});function tl(e){let{editor:t}=e;return t?(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-1 border-b border-outline-variant p-2",children:[(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("bold"),onPressedChange:()=>t.chain().focus().toggleBold().run(),"aria-label":"Toggle bold",children:(0,s.jsx)(e4.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("italic"),onPressedChange:()=>t.chain().focus().toggleItalic().run(),"aria-label":"Toggle italic",children:(0,s.jsx)(e5.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("strike"),onPressedChange:()=>t.chain().focus().toggleStrike().run(),"aria-label":"Toggle strikethrough",children:(0,s.jsx)(e3.A,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"mx-1 h-6 w-px bg-outline-variant"}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("heading",{level:1}),onPressedChange:()=>t.chain().focus().toggleHeading({level:1}).run(),"aria-label":"Toggle heading 1",children:(0,s.jsx)(e6.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("heading",{level:2}),onPressedChange:()=>t.chain().focus().toggleHeading({level:2}).run(),"aria-label":"Toggle heading 2",children:(0,s.jsx)(e8.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("heading",{level:3}),onPressedChange:()=>t.chain().focus().toggleHeading({level:3}).run(),"aria-label":"Toggle heading 3",children:(0,s.jsx)(e7.A,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"mx-1 h-6 w-px bg-outline-variant"}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("bulletList"),onPressedChange:()=>t.chain().focus().toggleBulletList().run(),"aria-label":"Toggle bullet list",children:(0,s.jsx)(ed.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",pressed:t.isActive("orderedList"),onPressedChange:()=>t.chain().focus().toggleOrderedList().run(),"aria-label":"Toggle ordered list",children:(0,s.jsx)(e9.A,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"mx-1 h-6 w-px bg-outline-variant"}),(0,s.jsx)(ti,{size:"sm",onPressedChange:()=>t.chain().focus().setHorizontalRule().run(),"aria-label":"Add horizontal rule",children:(0,s.jsx)(te.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",onPressedChange:()=>t.chain().focus().undo().run(),disabled:!t.can().chain().focus().undo().run(),"aria-label":"Undo",children:(0,s.jsx)(tt.A,{className:"h-4 w-4"})}),(0,s.jsx)(ti,{size:"sm",onPressedChange:()=>t.chain().focus().redo().run(),disabled:!t.can().chain().focus().redo().run(),"aria-label":"Redo",children:(0,s.jsx)(ta.A,{className:"h-4 w-4"})})]}):null}ti.displayName=ts.b.displayName;let to=[{id:"situation",title:"Situation / Trigger",prompt:"What happened? Where? When? Who with? How?",placeholder:"Describe the event or situation..."},{id:"feelings",title:"Feelings & Body Sensations",prompt:"What emotion did I feel? What did I notice in my body? Where?",placeholder:"e.g., Anxiety, tightness in chest..."},{id:"unhelpfulThoughts",title:"Unhelpful / Initial Thoughts & Images",prompt:"What went through my mind? What disturbed me? Meaning? What ‘button’ is this pressing for me? Worst outcome?",placeholder:'e.g., "I\'m going to fail", image of messing up...'},{id:"evidenceAgainst",title:"Facts Against Initial Thought",prompt:"What facts counter the unhelpful thoughts? Is it opinion, not fact? Others' views?",placeholder:'e.g., "I\'ve prepared well", "I\'ve succeeded before"...'},{id:"evidenceFor",title:"Facts Supporting Initial Thought",prompt:"What facts support the unhelpful thoughts? What makes them seem true?",placeholder:'e.g., "This is a difficult task", "I made a mistake previously"...'},{id:"alternativePerspective",title:"Alternative, Balanced Perspective",prompt:"Breathe. Someone else's view? Bigger picture? Reframe? Advice to others? Proportional reaction? Importance?",placeholder:'e.g., "One mistake doesn\'t define me", "I can ask for help"...'},{id:"outcome",title:"Outcome",prompt:"Feeling now? What to do differently/more effectively? Act wisely. Most helpful action? Consequences?",placeholder:"e.g., Hopeful, plan to practice mindfulness..."}],tc={situation:"",feelings:"",feelingsRating:50,unhelpfulThoughts:"",evidenceAgainst:"",evidenceFor:"",alternativePerspective:"",outcome:"",outcomeRating:50},td=e=>{let{onSave:t,initialData:a,onClose:n,isActive:i}=e,[l,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(tc),[m,u]=(0,r.useState)(null),[h,x]=(0,r.useState)(""),f=to[l],g=(0,e0.hG)({extensions:[e1.A,e2.A.configure({placeholder:f.placeholder})],editorProps:{attributes:{class:"prose prose-sm sm:prose-base dark:prose-invert max-w-none focus:outline-none flex-grow min-h-[200px]"}},onUpdate:e=>{let{editor:t}=e,a=to[l].id;d(e=>({...e,[a]:t.getHTML()})),m&&u(null)}},[f.placeholder]);(0,r.useEffect)(()=>{i&&(a?(d(a.data),x(a.title)):(d(tc),x("Thought Record - ".concat(new Date().toLocaleDateString()))),o(0),u(null))},[i,a]),(0,r.useEffect)(()=>{if(!g||!i)return;let e=c[f.id]||"";g.getHTML()!==e&&g.commands.setContent(e,!1),g.commands.focus();let t=document.getElementById("thought-record-form-top");null==t||t.scrollIntoView({behavior:"smooth",block:"start"})},[l,g,i]);let{isRecording:p,startRecording:v,stopRecording:b,speechError:j,isSpeechSupported:y}=eE({onTranscriptUpdate:(0,r.useCallback)((e,t)=>{t&&g&&g.chain().focus().insertContent(e.trim()+" ").run()},[g])}),N=e=>{"feelings"===f.id?d(t=>({...t,feelingsRating:e})):"outcome"===f.id&&d(t=>({...t,outcomeRating:e}))},w=e=>{p&&b(),o(e)},k=()=>{if(p&&b(),!Object.values(c).some(e=>{if("string"!=typeof e)return!1;let t=document.createElement("div");return t.innerHTML=e,""!==(t.textContent||t.innerText||"").trim()}))return void u("Please fill in at least one section before saving.");t(null==a?void 0:a.id,c),n()},C=async()=>{y&&(p?b():(await v(),null==g||g.commands.focus()))},S=0===l,A=l===to.length-1,I="feelings"===f.id?c.feelingsRating:c.outcomeRating;return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-surface-container overflow-hidden rounded-t-3xl md:rounded-3xl",children:[(0,s.jsxs)("div",{className:"flex flex-shrink-0 items-center justify-between p-4 pt-6 border-b border-outline-variant",children:[(0,s.jsx)("h2",{className:"font-serif text-headline-md text-surface-on",children:a?"Edit Thought Record":"New Thought Record"}),(0,s.jsx)(W,{onClick:()=>{p&&b(),n()},variant:"text",size:"sm",isIconOnly:!0,className:"text-surface-on-variant","aria-label":"Close form",title:"Close",children:(0,s.jsx)(ee.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{id:"thought-record-form-top",className:"p-6 space-y-6 flex-grow overflow-y-auto",children:[m&&(0,s.jsx)("p",{className:"text-label-md text-error p-3 bg-error-container/20 rounded-lg",children:m}),(0,s.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-serif text-title-lg text-primary",children:f.title}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant italic mt-1.5",children:f.prompt})]}),("feelings"===f.id||"outcome"===f.id)&&(0,s.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,s.jsxs)("label",{htmlFor:"".concat(f.id,"-rating"),className:"block text-sm font-medium text-surface-on-variant mb-1",children:["feelings"===f.id?"Rate Intensity (0-100)":"Re-rate Emotion",": ",(0,s.jsx)("span",{className:"font-bold text-surface-on",children:I})]}),(0,s.jsx)(eQ,{id:"".concat(f.id,"-rating"),min:0,max:100,step:1,value:[I],onValueChange:e=>N(e[0]),className:"w-full","aria-label":"outcome"===f.id?"Re-rate emotion slider":"Intensity rating slider"})]}),(0,s.jsxs)("div",{className:"relative pt-2",children:[(0,s.jsxs)("div",{className:"flex flex-col bg-surface-container-low border border-outline-variant rounded-xl overflow-hidden",children:[(0,s.jsx)(tl,{editor:g}),(0,s.jsx)("div",{className:"p-4 flex-grow min-h-[250px]",children:(0,s.jsx)(e0.$Z,{editor:g})})]}),y&&(0,s.jsx)(W,{onClick:C,variant:p?"filled":"tonal",size:"sm",isIconOnly:!0,className:"absolute top-5 right-3","aria-label":p?"Stop Dictation":"Start Dictation",title:p?"Stop Dictation":"Start Dictation",leadingIcon:p?(0,s.jsx)(eK.A,{}):(0,s.jsx)(eI.A,{})})]}),j&&(0,s.jsx)("p",{className:"text-label-md text-error mt-1",children:j})]})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center gap-3 p-6 border-t border-outline-variant",children:[(0,s.jsx)(W,{onClick:()=>{p&&b(),S||o(e=>e-1)},variant:"outlined",isIconOnly:!0,leadingIcon:(0,s.jsx)(eX.A,{}),"aria-label":"Previous step in thought record",disabled:S,className:(0,U.cn)(S&&"invisible")}),(0,s.jsx)("div",{className:"flex justify-center items-center gap-4",children:to.map((e,t)=>(0,s.jsx)("button",{type:"button",onClick:()=>w(t),className:(0,U.cn)("w-3 h-3 rounded-full cursor-pointer transition-all duration-300",t===l?"bg-primary scale-125":t<l?"bg-primary/50":"bg-outline hover:bg-outline-variant"),"aria-label":"Go to step ".concat(t+1),"aria-current":t===l?"step":void 0},"step-".concat(t)))}),(0,s.jsx)(W,{onClick:()=>{p&&b(),A?k():o(e=>e+1)},variant:"filled",isIconOnly:!0,leadingIcon:A?(0,s.jsx)(eD.A,{}):(0,s.jsx)(eZ.A,{}),"aria-label":A?"Save thought record":"Next step in thought record"})]})]})},tm=[{id:"situation",title:"Situation / Trigger"},{id:"feelings",title:"Feelings & Body Sensations"},{id:"unhelpfulThoughts",title:"Unhelpful / Initial Thoughts & Images"},{id:"evidenceFor",title:"Facts Supporting Initial Thought"},{id:"evidenceAgainst",title:"Facts Against Initial Thought"},{id:"alternativePerspective",title:"Alternative, Balanced Perspective"},{id:"outcome",title:"Outcome"}],tu=e=>{let{isOpen:t,onClose:a,record:r,onEdit:n}=e;return r?(0,s.jsxs)(eJ,{isOpen:t,onClose:a,title:r.title,children:[(0,s.jsxs)("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[(0,s.jsxs)("p",{className:"text-sm text-surface-on-variant mb-4",children:["Recorded on ",new Date(r.timestamp).toLocaleString()]}),(0,s.jsx)("div",{className:"space-y-4",children:tm.map(e=>{let t=r.data[e.id];if(!(t&&"string"==typeof t&&""!==t.replace(/<p><\/p>/g,"").trim()))return null;let a=e.title;return"feelings"===e.id&&r.data.feelingsRating?a+=" (".concat(r.data.feelingsRating,"/100)"):"outcome"===e.id&&r.data.outcomeRating&&(a+=" (".concat(r.data.outcomeRating,"/100)")),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-serif text-title-md text-surface-on mb-1",children:a}),(0,s.jsx)("div",{className:"prose prose-sm sm:prose-base dark:prose-invert max-w-none break-words",dangerouslySetInnerHTML:{__html:t}})]},e.id)})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-outline-variant",children:[(0,s.jsx)(W,{type:"button",variant:"text",onClick:a,children:"Close"}),(0,s.jsx)(W,{type:"button",variant:"filled",leadingIcon:(0,s.jsx)(eR.A,{}),onClick:()=>{n(r),a()},children:"Edit Record"})]})]}):null};var th=a(9274),tx=a(8716),tf=a(3790),tg=a(9829),tp=a(965),tv=a(3158);let tb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return e.toLocaleDateString(t,{month:"long"})},tj=e=>e.getFullYear(),ty=(e,t)=>{let a=new Date(e);return a.setMonth(a.getMonth()+t),a},tN=(e,t)=>{let a=new Date(e);return a.setDate(a.getDate()+t),a},tw=e=>new Date(e.getFullYear(),e.getMonth(),1),tk=e=>new Date(e.getFullYear(),e.getMonth()+1,0),tC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.getDay(),s=new Date(e);return s.setDate(e.getDate()-(7*(a<t)+a-t)),s.setHours(0,0,0,0),s},tS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=tC(e,t),s=new Date(a);return s.setDate(a.getDate()+6),s.setHours(23,59,59,999),s},tA=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),tI=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth(),tD=e=>{let t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(s)},tT=e=>{let t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return"".concat(t,":").concat(a)},tE=(e,t)=>{if(!t){let[t,a,s]=e.split("-").map(Number);return new Date(Date.UTC(t,a-1,s))}let[a,s,r]=e.split("-").map(Number),[n,i]=t.split(":").map(Number);return new Date(a,s-1,r,n,i)},tM=(e,t)=>{if(t)return tD(e);let a=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),n=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),l=e.getSeconds().toString().padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(r,"T").concat(n,":").concat(i,":").concat(l)},t_=e=>{if(10===e.length&&e.match(/^\d{4}-\d{2}-\d{2}$/)){let[t,a,s]=e.split("-").map(Number);return new Date(t,a-1,s)}return new Date(e)},tR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=tC(new Date,t),s=[];for(let t=0;t<7;t++)s.push(tN(a,t).toLocaleDateString(e,{weekday:"short"}));return s},tz=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=tC(e,t),s=tS(e,t),r=a.toLocaleDateString("en-US",{month:"short"}),n=s.toLocaleDateString("en-US",{month:"short"});return a.getFullYear()!==s.getFullYear()?"".concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ").concat(s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})):r===n?"".concat(r," ").concat(a.getDate()," - ").concat(s.getDate(),", ").concat(a.getFullYear()):"".concat(r," ").concat(a.getDate()," - ").concat(n," ").concat(s.getDate(),", ").concat(a.getFullYear())},tP=e=>e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),tO=e=>{let{options:t,value:a,onChange:r,className:n=""}=e;return(0,s.jsx)("div",{className:"inline-flex items-center bg-surface-container-low p-1 rounded-full space-x-1 ".concat(n),children:t.map(e=>(0,s.jsx)(W,{onClick:()=>r(e.value),variant:a===e.value?"tonal":"text",size:"md",className:"!rounded-full transition-all duration-300 ".concat(a===e.value?"bg-secondary-container text-on-secondary-container shadow-sm":"text-surface-on-variant hover:bg-black/5"),"aria-pressed":a===e.value,children:e.label},e.value))})},tL=e=>{let{viewMode:t,onViewChange:a,onAddEvent:r}=e;return(0,s.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-4 p-2 bg-surface-container rounded-xl shadow mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(tO,{value:t,onChange:e=>a(e),options:[{value:"month",label:"Month"},{value:"week",label:"Week"},{value:"day",label:"Day"}]}),(0,s.jsx)(W,{onClick:r,variant:"filled",size:"md",leadingIcon:(0,s.jsx)(eg.A,{}),children:"Add Event"})]})})};var tF=a(1550);let tU=e=>{let{currentDisplayDate:t,events:a,journalEntries:r,thoughtRecords:n,onDateClick:i,onEventClick:l,onPrev:o,onNext:c,currentDateTitle:d,onViewJournalEntry:m,onViewThoughtRecord:u}=e,h=new Date,x=tw(t),f=tk(t),g=tC(x,0),p=tS(f,0),v=tR("en-US",0),b=[],j=g;for(;j<=p;)b.push(new Date(j)),j=tN(j,1);let y=e=>a.filter(t=>{let a=t_(t.start),s=t_(t.end);if(t.allDay){let t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate());return t>=r&&t<=n}return e>=a&&e<tN(s,1)}).sort((e,t)=>e.allDay===t.allDay?0:e.allDay?-1:1),N=e=>r.find(t=>tA(new Date(t.timestamp),e)),w=e=>n.find(t=>tA(new Date(t.timestamp),e));return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-outline-variant",children:[(0,s.jsx)("h2",{className:"font-serif text-headline-sm sm:text-headline-md text-surface-on truncate",title:d,children:d}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(W,{onClick:o,variant:"tonal",size:"sm",isIconOnly:!0,leadingIcon:(0,s.jsx)(tp.A,{}),"aria-label":"Previous month"}),(0,s.jsx)(W,{onClick:c,variant:"tonal",size:"sm",isIconOnly:!0,leadingIcon:(0,s.jsx)(tv.A,{}),"aria-label":"Next month"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 border-b border-outline-variant",children:v.map(e=>(0,s.jsx)("div",{className:"p-2 text-center text-label-md font-medium text-surface-on-variant",children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-7 auto-rows-[minmax(100px,_1fr)] sm:auto-rows-[minmax(140px,_1fr)] md:auto-rows-[minmax(160px,_1fr)]",children:b.map((e,a)=>{let r=tI(e,t),n=tA(e,h),o=y(e),c=N(e),d=w(e);return(0,s.jsxs)("div",{className:"p-2 sm:p-3 border border-outline-variant/30 \n                          transition-colors duration-200 ease-in-out cursor-pointer group\n                          ".concat(r?"bg-surface-container-low hover:bg-surface-container":"bg-surface-container-lowest text-surface-on-variant/50 hover:bg-surface-container/50","\n                          "),onClick:()=>i(e),role:"gridcell","aria-label":"Date ".concat(e.getDate()," ").concat(tb(e)),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("span",{className:"text-xs sm:text-sm font-medium rounded-full w-6 h-6 sm:w-7 sm:h-7 flex items-center justify-center\n                  ".concat(n?"bg-primary text-primary-foreground":r?"text-surface-on":"text-surface-on-variant/70","\n                  group-hover:text-primary"),children:e.getDate()}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[c&&r&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),m(c)},className:"p-1 -m-1 rounded-full hover:bg-surface-container-high","aria-label":"View journal entry",children:(0,s.jsx)(tF.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-secondary"})}),d&&r&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u(d)},className:"p-1 -m-1 rounded-full hover:bg-surface-container-high","aria-label":"View thought record",children:(0,s.jsx)(X.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-tertiary"})})]})]}),r&&(0,s.jsxs)("div",{className:"space-y-0.5 overflow-y-auto max-h-[48px] sm:max-h-[80px] md:max-h-[100px] text-xs",children:[o.slice(0,3).map(e=>(0,s.jsxs)("div",{onClick:t=>{t.stopPropagation(),l(e)},className:"px-1.5 py-0.5 rounded ".concat(e.color||"bg-indigo-500"," text-white text-[0.6rem] sm:text-xs truncate cursor-pointer hover:opacity-80"),title:e.title,children:[e.allDay&&(0,s.jsx)("span",{className:"font-semibold",children:"All Day: "}),e.title]},e.id)),o.length>3&&(0,s.jsxs)("div",{className:"text-[0.6rem] sm:text-xs text-surface-on-variant text-center",children:["+",o.length-3," more"]})]})]},a)})})]})},tB=e=>{let{currentDisplayDate:t,events:a,journalEntries:r,thoughtRecords:n,onDateClick:i,onEventClick:l,onPrev:o,onNext:c,currentDateTitle:d,onViewJournalEntry:m,onViewThoughtRecord:u}=e,h=new Date,x=tC(t,0),f=[];for(let e=0;e<7;e++)f.push(tN(x,e));let g=e=>a.filter(t=>{let a=t_(t.start),s=t_(t.end);if(t.allDay){let t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate());return t>=r&&t<=n}return tA(a,e)}).sort((e,t)=>e.allDay!==t.allDay?e.allDay?-1:1:t_(e.start).getTime()-t_(t.start).getTime()),p=e=>r.find(t=>tA(new Date(t.timestamp),e)),v=e=>n.find(t=>tA(new Date(t.timestamp),e));return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-surface-container-low shadow-lg rounded-xl",children:[(0,s.jsx)("h2",{className:"font-serif text-headline-sm sm:text-headline-md text-surface-on truncate",title:d,children:d}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(W,{onClick:o,variant:"tonal",size:"sm",isIconOnly:!0,leadingIcon:(0,s.jsx)(tp.A,{}),"aria-label":"Previous week"}),(0,s.jsx)(W,{onClick:c,variant:"tonal",size:"sm",isIconOnly:!0,leadingIcon:(0,s.jsx)(tv.A,{}),"aria-label":"Next week"})]})]}),f.map((e,t)=>{let a=g(e),r=p(e),n=v(e),o=tA(e,h);return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl p-4 sm:p-5 cursor-pointer hover:bg-surface-container transition-colors",onClick:()=>i(e),role:"article","aria-labelledby":"day-header-".concat(t),children:[(0,s.jsxs)("div",{id:"day-header-".concat(t),className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-serif text-title-lg ".concat(o?"text-primary":"text-surface-on"),children:e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),m(r)},className:"p-1 -m-1 rounded-full hover:bg-surface-container-high","aria-label":"View journal entry on this day",children:(0,s.jsx)(tF.A,{className:"w-5 h-5 text-secondary"})}),n&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u(n)},className:"p-1 -m-1 rounded-full hover:bg-surface-container-high","aria-label":"View thought record on this day",children:(0,s.jsx)(X.A,{className:"w-5 h-5 text-tertiary"})})]})]}),a.length>0?(0,s.jsx)("div",{className:"space-y-1.5",children:a.map(e=>(0,s.jsxs)("div",{onClick:t=>{t.stopPropagation(),l(e)},className:"p-2 rounded-md text-white text-sm truncate cursor-pointer hover:opacity-80 transition-opacity flex items-center gap-2 ".concat(e.color||"bg-indigo-500"),title:e.title,children:[!e.allDay&&(0,s.jsx)("span",{className:"font-semibold text-xs whitespace-nowrap",children:tT(t_(e.start))}),(0,s.jsx)("span",{className:"truncate",children:e.title})]},e.id))}):(0,s.jsx)("p",{className:"text-sm text-surface-on-variant text-center py-4 italic",children:"No events scheduled."})]},t)})]})},tW=e=>{let{currentDisplayDate:t,events:a,journalEntries:r,thoughtRecords:n,onEventClick:i,onAddEvent:l,onPrev:o,onNext:c,currentDateTitle:d,onViewJournalEntry:m,onViewThoughtRecord:u}=e,h=a.filter(e=>{let a=t_(e.start),s=t_(e.end);if(e.allDay){let e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate());return e>=r&&e<=n}return tA(a,t)}).sort((e,t)=>e.allDay!==t.allDay?e.allDay?-1:1:t_(e.start).getTime()-t_(t.start).getTime()),x=h.filter(e=>e.allDay),f=h.filter(e=>!e.allDay),g=r.filter(e=>tA(new Date(e.timestamp),t)),p=n.filter(e=>tA(new Date(e.timestamp),t));return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 mb-4 border-b border-outline-variant",children:[(0,s.jsx)("h2",{className:"font-serif text-headline-sm sm:text-headline-md text-surface-on truncate",title:d,children:d}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(W,{onClick:o,variant:"tonal",size:"sm",isIconOnly:!0,leadingIcon:(0,s.jsx)(tp.A,{}),"aria-label":"Previous day"}),(0,s.jsx)(W,{onClick:c,variant:"tonal",size:"sm",isIconOnly:!0,leadingIcon:(0,s.jsx)(tv.A,{}),"aria-label":"Next day"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(g.length>0||p.length>0)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-serif text-title-md text-surface-on",children:"Entries & Records"}),g.map(e=>(0,s.jsxs)("button",{onClick:()=>m(e),className:"w-full text-left flex items-center gap-2 p-3 bg-secondary-container/30 rounded-lg text-sm text-on-secondary-container cursor-pointer hover:bg-secondary-container/50",children:[(0,s.jsx)(tF.A,{className:"w-5 h-5 flex-shrink-0"}),(0,s.jsxs)("span",{className:"truncate",children:["Journal: ",e.title||"Entry from ".concat(tT(new Date(e.timestamp)))]})]},e.id)),p.map(e=>(0,s.jsxs)("button",{onClick:()=>u(e),className:"w-full text-left flex items-center gap-2 p-3 bg-tertiary-container/30 rounded-lg text-sm text-on-tertiary-container cursor-pointer hover:bg-tertiary-container/50",children:[(0,s.jsx)(X.A,{className:"w-5 h-5 flex-shrink-0"}),(0,s.jsxs)("span",{className:"truncate",children:["Thought Record: ",e.title]})]},e.id))]}),x.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-serif text-title-md text-surface-on",children:"All-Day Events"}),(0,s.jsx)("div",{className:"space-y-1",children:x.map(e=>(0,s.jsx)("div",{onClick:()=>i(e),className:"p-2 rounded-md text-white text-sm truncate cursor-pointer hover:opacity-80 transition-opacity ".concat(e.color||"bg-indigo-500"),title:e.title,children:e.title},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-serif text-title-md text-surface-on",children:f.length>0?"Scheduled Events":"No Scheduled Events"}),f.length>0?(0,s.jsx)("ul",{className:"space-y-3",children:f.map(e=>(0,s.jsxs)("li",{onClick:()=>i(e),className:"flex items-start gap-3 cursor-pointer group",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-primary whitespace-nowrap",children:tT(t_(e.start))}),(0,s.jsx)("p",{className:"text-xs text-primary/80 whitespace-nowrap",children:tT(t_(e.end))})]}),(0,s.jsx)("div",{className:"w-1 h-full flex justify-center",children:(0,s.jsx)("div",{className:"w-0.5 h-full rounded-full ".concat(e.color||"bg-indigo-500")})}),(0,s.jsxs)("div",{className:"flex-grow p-3 rounded-md text-white -mt-1 group-hover:opacity-80 transition-opacity ".concat(e.color||"bg-indigo-500"),children:[(0,s.jsx)("p",{className:"font-bold text-sm",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-xs opacity-90",children:e.description})]})]},e.id))}):(0,s.jsx)("div",{onClick:()=>l(t),className:"text-center text-surface-on-variant py-8 cursor-pointer hover:bg-surface-container rounded-lg",children:(0,s.jsx)("p",{children:"Click here to add an event."})})]})]})]})};var tq=a(1949);let tY=[{name:"Indigo",class:"bg-indigo-500"},{name:"Teal",class:"bg-teal-500"},{name:"Amber",class:"bg-amber-500"},{name:"Rose",class:"bg-rose-600"},{name:"Sky",class:"bg-sky-500"},{name:"Lime",class:"bg-lime-500"},{name:"Violet",class:"bg-violet-500"},{name:"Fuchsia",class:"bg-fuchsia-500"}],tJ=e=>{let{isOpen:t,onClose:a,onSave:n,eventToEdit:i,initialDate:l}=e,[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[x,f]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[v,b]=(0,r.useState)(!0),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(tY[0].class),[k,C]=(0,r.useState)(null),S=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(t){if(C(null),i){let e=t_(i.start),t=t_(i.end);c(i.title),b(i.allDay),m(tD(e)),h(i.allDay?"00:00":tT(e)),f(tD(t)),p(i.allDay?"23:59":tT(t)),y(i.description||""),w(i.color||tY[0].class)}else{let e=l||new Date;c(""),b(!0),m(tD(e)),h("09:00"),f(tD(e)),p("10:00"),y(""),w(tY[0].class)}setTimeout(()=>{var e;return null==(e=S.current)?void 0:e.focus()},100)}},[t,i,l]),(0,s.jsx)(eJ,{isOpen:t,onClose:a,title:i?"Edit Event":"Add New Event",children:(0,s.jsxs)("form",{onSubmit:e=>{let t,s;if(e.preventDefault(),C(null),!o.trim())return void C("Title is required.");if(!d)return void C("Start date is required.");if(!v&&!u)return void C("Start time is required for timed events.");if(x||f(d),!v&&!g){let e=tE(d,u);e.setHours(e.getHours()+1),p(tT(e))}if(v?(t=tE(d),s=tE(x||d)):(t=tE(d,u),s=tE(x||d,g||u)),s<t)return void C("End date/time cannot be before start date/time.");n({id:null==i?void 0:i.id,title:o.trim(),start:tM(t,v),end:tM(s,v),allDay:v,description:j.trim()||void 0,color:N}),a()},className:"space-y-5 px-6 pb-6",children:[k&&(0,s.jsxs)("div",{className:"bg-error-container text-on-error-container p-3 rounded-lg text-sm flex items-center gap-2",role:"alert",children:[(0,s.jsx)(tq.A,{size:18})," ",k]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"eventTitle",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Event Title ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{ref:S,type:"text",id:"eventTitle",value:o,onChange:e=>c(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{htmlFor:"eventStartDate",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Start Date ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{type:"date",id:"eventStartDate",value:d,onChange:e=>m(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on",required:!0})]}),!v&&(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{htmlFor:"eventStartTime",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Start Time ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{type:"time",id:"eventStartTime",value:u,onChange:e=>h(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on",required:!v})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{htmlFor:"eventEndDate",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["End Date ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{type:"date",id:"eventEndDate",value:x,onChange:e=>f(e.target.value),min:d,className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on",required:!0})]}),!v&&(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{htmlFor:"eventEndTime",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["End Time ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{type:"time",id:"eventEndTime",value:g,onChange:e=>p(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on",required:!v})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"allDayEvent",checked:v,onChange:e=>{b(e.target.checked),e.target.checked||(u||h("09:00"),g||p("10:00"))},className:"h-4 w-4 text-primary focus:ring-primary border-outline-variant rounded"}),(0,s.jsx)("label",{htmlFor:"allDayEvent",className:"ml-2 text-sm font-medium text-surface-on",children:"All-day event"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"eventDescription",className:"block text-sm font-medium text-surface-on-variant mb-1",children:"Description (Optional)"}),(0,s.jsx)("textarea",{id:"eventDescription",value:j,onChange:e=>y(e.target.value),rows:3,className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-surface-on-variant mb-1",children:"Event Color"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:tY.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>w(e.class),className:"w-8 h-8 rounded-full ".concat(e.class," ").concat(N===e.class?"ring-2 ring-offset-2 ring-primary":""," transition-all focus:outline-none"),"aria-label":"Select color ".concat(e.name),"aria-pressed":N===e.class},e.class))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,s.jsx)(W,{type:"button",variant:"text",onClick:a,children:"Cancel"}),(0,s.jsx)(W,{type:"submit",variant:"filled",leadingIcon:(0,s.jsx)(eD.A,{}),children:i?"Save Changes":"Add Event"})]})]})})};var tH=a(7648),tV=a(6491),tG=a(8763);let tK=e=>{let{isOpen:t,onClose:a,onEdit:r,onDelete:n,event:i}=e;if(!i)return null;let l=t_(i.start),o=t_(i.end),c=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),d=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),m=i.allDay&&!tA(l,o);return(0,s.jsx)(eJ,{isOpen:t,onClose:a,title:i.title,children:(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4 text-surface-on-variant",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0 ".concat(i.color||"bg-indigo-500")}),(0,s.jsx)("p",{className:"text-sm font-medium text-surface-on",children:"Event Color"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(tH.A,{className:"w-5 h-5 flex-shrink-0 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-surface-on",children:"Time"}),i.allDay?(0,s.jsx)("p",{children:"All-day event"}):(0,s.jsx)("p",{children:"".concat(d(l)," - ").concat(d(o))})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(K.A,{className:"w-5 h-5 flex-shrink-0 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-surface-on",children:"Date"}),(0,s.jsxs)("p",{children:[c(l),m&&" to ".concat(c(o))]})]})]}),i.description&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(tV.A,{className:"w-5 h-5 flex-shrink-0 text-primary mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-surface-on",children:"Description"}),(0,s.jsx)("p",{className:"whitespace-pre-wrap break-words",children:i.description})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-outline-variant",children:[(0,s.jsx)(W,{type:"button",variant:"text",onClick:a,children:"Close"}),(0,s.jsx)(W,{type:"button",variant:"outlined",onClick:()=>{n(i.id),a()},className:"text-error border-error hover:bg-error-container/20",isIconOnly:!0,title:"Delete Event",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})}),(0,s.jsx)(W,{type:"button",variant:"filled",onClick:()=>{r(i),a()},leadingIcon:(0,s.jsx)(tG.A,{className:"w-5 h-5"}),children:"Edit"})]})]})})},tX=e=>tC(new Date(e),1),tZ=e=>e.toISOString().split("T")[0],t$=e=>{let t=tN(e,6),a=e.toLocaleString("en-US",{month:"short"}),s=t.toLocaleString("en-US",{month:"short"});return a===s?"".concat(a," ").concat(e.getDate()," - ").concat(t.getDate(),", ").concat(e.getFullYear()):"".concat(a," ").concat(e.getDate()," - ").concat(s," ").concat(t.getDate(),", ").concat(e.getFullYear())},tQ=e=>e.map(e=>"- [".concat(e.completed?"x":" ","] ").concat(e.text)).join("\n"),t0=e=>{if(!e.trim())return[];let t=/^-?\s*\[([xX\s])\]\s*(.*)/;return e.split("\n").map((e,a)=>{let s=e.match(t);return{id:"".concat(Date.now(),"-").concat(a),text:s?s[2].trim():e.trim(),completed:!!s&&"x"===s[1].toLowerCase()}}).filter(e=>e.text.length>0)},t1=[{name:"Happy",icon:(0,s.jsx)(th.A,{}),colorClass:"text-green-500",darkColorClass:"dark:text-green-400"},{name:"Okay",icon:(0,s.jsx)(tx.A,{}),colorClass:"text-blue-500",darkColorClass:"dark:text-blue-400"},{name:"Sad",icon:(0,s.jsx)(tf.A,{}),colorClass:"text-red-500",darkColorClass:"dark:text-red-400"},{name:"Productive",icon:(0,s.jsx)(tg.A,{}),colorClass:"text-purple-500",darkColorClass:"dark:text-purple-400"},{name:"Tired",icon:(0,s.jsx)(ei.A,{}),colorClass:"text-gray-500",darkColorClass:"dark:text-gray-400"}],t2=e=>{let{getDailyPlan:t,saveDailyPlan:a,getWeeklyPlan:n,saveWeeklyPlan:i,onSavePlanToJournal:l,events:o,journalEntries:c,thoughtRecords:d,onAddEvent:m,onUpdateEvent:u,onDeleteEvent:h,onViewJournalEntry:x,onViewThoughtRecord:f}=e,[g,p]=(0,r.useState)("goals"),[v]=(0,r.useState)(new Date),[b,j]=(0,r.useState)(()=>tX(new Date)),y=tZ(v),N=b.toISOString().split("T")[0],[w,k]=(0,r.useState)(void 0),[C,S]=(0,r.useState)([]),[A,I]=(0,r.useState)(""),[D,T]=(0,r.useState)(""),[E,M]=(0,r.useState)([]),[_,R]=(0,r.useState)(""),[z,P]=(0,r.useState)(""),O=(0,r.useRef)(null),L=(0,r.useRef)(null),F=(0,r.useRef)(null),U=(0,r.useRef)(!0),[B,q]=(0,r.useState)(new Date),[Y,J]=(0,r.useState)("month"),[H,V]=(0,r.useState)(!1),[X,Z]=(0,r.useState)(null),[$,Q]=(0,r.useState)(void 0),[ee,et]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(null),er=(0,r.useMemo)(()=>o,[o]),en=(0,r.useMemo)(()=>c,[c]),ei=(0,r.useMemo)(()=>d,[d]);(0,r.useEffect)(()=>{U.current=!0;let e=t(y);k(null==e?void 0:e.mood),S((null==e?void 0:e.goals)||[]),T(tQ((null==e?void 0:e.tasks)||[]));let a=n(N);M((null==a?void 0:a.goals)||[]),P((null==a?void 0:a.notes)||"");let s=setTimeout(()=>{U.current=!1},0);return()=>clearTimeout(s)},[y,N,t,n]),(0,r.useEffect)(()=>{U.current||a({date:y,mood:w,goals:C,tasks:t0(D)})},[w,C,D,y,a]),(0,r.useEffect)(()=>{U.current||i({weekStartDate:N,goals:E,notes:z})},[E,z,N,i]);let el=eE({onTranscriptUpdate:(0,r.useCallback)((e,t)=>{if(t){var a;T(t=>t+(t&&!t.endsWith(" ")?" ":"")+e.trim()),null==(a=O.current)||a.focus(),setTimeout(()=>{O.current&&(O.current.selectionStart=O.current.selectionEnd=O.current.value.length)},0)}},[])}),ec=()=>{if(A.trim()){var e;S(e=>[...e,{id:Date.now().toString(),text:A.trim(),completed:!1}]),I(""),null==(e=L.current)||e.focus()}},ed=()=>{if(_.trim()){var e;M(e=>[...e,{id:Date.now().toString(),text:_.trim(),completed:!1}]),R(""),null==(e=F.current)||e.focus()}},em=(e,t)=>{t(t=>t.map(t=>t.id===e?{...t,completed:!t.completed}:t))},eu=(e,t)=>{t(t=>t.filter(t=>t.id!==e))},eh=(0,r.useCallback)(()=>{q(e=>{switch(Y){case"month":return ty(e,-1);case"week":return tN(e,-7);case"day":return tN(e,-1);default:return e}})},[Y]),ex=(0,r.useCallback)(()=>{q(e=>{switch(Y){case"month":return ty(e,1);case"week":return tN(e,7);case"day":return tN(e,1);default:return e}})},[Y]),ef=e=>{Z(null),Q(e||new Date),V(!0)},eg=e=>{es(e),et(!0)},ep=e=>{"month"===Y||"week"===Y?(q(e),J("day")):ef(e)},ev=()=>{switch(Y){case"month":return"".concat(tb(B)," ").concat(tj(B));case"week":return tz(B,0);case"day":return tP(B);default:return""}};return(0,s.jsxs)("div",{className:"space-y-10 animate-in fade-in-0 duration-1000 max-w-7xl w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(K.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"Planner & Calendar"})]}),(0,s.jsx)(tO,{value:g,onChange:e=>p(e),options:[{value:"goals",label:"Goal Tracker"},{value:"calendar",label:"Calendar View"}]})]}),"goals"===g&&(0,s.jsx)("div",{className:"max-w-3xl mx-auto w-full space-y-10",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{className:"bg-surface-container-low p-4 sm:p-6 lg:p-8 rounded-2xl shadow-lg hover:shadow-xl","aria-labelledby":"daily-planner-heading",children:[(0,s.jsx)("h3",{id:"daily-planner-heading",className:"font-serif text-headline-sm text-surface-on mb-1",children:"Today's Focus"}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:v.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on mb-3",children:"How are you feeling today?"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:t1.map(e=>(0,s.jsxs)("button",{onClick:()=>k(e.name),className:"p-4 rounded-xl flex flex-col items-center justify-center space-y-2 transition-all transform hover:scale-105 ".concat(w===e.name?"bg-primary-container text-on-primary-container ring-2 ring-primary":"bg-surface-container hover:bg-surface-container-high text-surface-on-variant"),"aria-pressed":w===e.name,children:[(0,s.jsx)("span",{className:"w-8 h-8 ".concat(e.colorClass," ").concat(e.darkColorClass),children:e.icon}),(0,s.jsx)("span",{className:"text-label-md font-medium",children:e.name})]},e.name))})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)(eo.A,{className:"w-6 h-6 text-secondary mr-2"}),(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on",children:"Daily Goals"})]}),(0,s.jsxs)("div",{className:"flex gap-3 my-3",children:[(0,s.jsx)("input",{ref:L,type:"text",value:A,onChange:e=>I(e.target.value),onKeyPress:e=>"Enter"===e.key&&ec(),placeholder:"Add a daily goal...",className:"flex-grow p-3 bg-surface-container border border-outline-variant rounded-xl text-body-lg","aria-label":"New daily goal"}),(0,s.jsx)(W,{onClick:ec,variant:"tonal",leadingIcon:(0,s.jsx)(eb.A,{}),"aria-label":"Add daily goal",children:"Add"})]}),C.length>0?(0,s.jsx)("ul",{className:"space-y-2 max-h-48 overflow-y-auto",children:C.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between p-2.5 bg-surface rounded-lg",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer group flex-grow mr-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>em(e.id,S),className:"h-5 w-5 rounded text-secondary focus:ring-secondary"}),(0,s.jsx)("span",{className:"text-body-md group-hover:text-secondary ".concat(e.completed?"line-through text-surface-on-variant":""),children:e.text})]}),(0,s.jsx)(W,{onClick:()=>eu(e.id,S),variant:"text",size:"sm",isIconOnly:!0,title:"Delete goal",className:"text-error hover:bg-error-container/20",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]},e.id))}):(0,s.jsx)("p",{className:"text-center text-sm text-surface-on-variant py-3",children:"No goals set for today."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(G.A,{className:"w-6 h-6 text-tertiary mr-2"}),(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on",children:"Daily Notes & Tasks"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{ref:O,value:D,onChange:e=>T(e.target.value),placeholder:"Jot down other thoughts, to-dos... Use [ ] or [x] for tasks.",rows:8,className:"w-full p-3 bg-surface-container border border-outline-variant rounded-xl text-body-lg","aria-label":"General tasks and notes"}),el.isSpeechSupported&&(0,s.jsx)(W,{onClick:()=>el.isRecording?el.stopRecording():el.startRecording(),variant:el.isRecording?"filled":"tonal",size:"sm",isIconOnly:!0,className:"absolute top-2.5 right-2.5",title:el.isRecording?"Stop Dictation":"Start Dictation",leadingIcon:el.isRecording?(0,s.jsx)(eK.A,{}):(0,s.jsx)(eI.A,{})})]}),el.speechError&&(0,s.jsx)("p",{className:"text-label-md text-error mt-1 px-1",children:el.speechError})]})]}),(0,s.jsxs)("section",{className:"bg-surface-container-low p-4 sm:p-6 lg:p-8 rounded-2xl shadow-lg hover:shadow-xl","aria-labelledby":"weekly-planner-heading",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-4",children:[(0,s.jsx)("h3",{id:"weekly-planner-heading",className:"font-serif text-headline-sm text-surface-on",children:"Weekly Plan"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(W,{onClick:()=>j(e=>tN(e,-7)),variant:"text",size:"sm",isIconOnly:!0,"aria-label":"Previous Week",children:(0,s.jsx)(tp.A,{})}),(0,s.jsx)("span",{className:"text-title-sm text-surface-on-variant whitespace-nowrap",children:t$(b)}),(0,s.jsx)(W,{onClick:()=>j(e=>tN(e,7)),variant:"text",size:"sm",isIconOnly:!0,"aria-label":"Next Week",children:(0,s.jsx)(tv.A,{})})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)(eo.A,{className:"w-6 h-6 text-secondary mr-2"}),(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on",children:"Weekly Goals"})]}),(0,s.jsxs)("div",{className:"flex gap-3 my-3",children:[(0,s.jsx)("input",{ref:F,type:"text",value:_,onChange:e=>R(e.target.value),onKeyPress:e=>"Enter"===e.key&&ed(),placeholder:"Add a weekly goal...",className:"flex-grow p-3 bg-surface-container border border-outline-variant rounded-xl text-body-lg","aria-label":"New weekly goal"}),(0,s.jsx)(W,{onClick:ed,variant:"tonal",leadingIcon:(0,s.jsx)(eb.A,{}),"aria-label":"Add weekly goal",children:"Add"})]}),E.length>0?(0,s.jsx)("ul",{className:"space-y-2 max-h-48 overflow-y-auto",children:E.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between p-2.5 bg-surface rounded-lg",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer group flex-grow mr-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>em(e.id,M),className:"h-5 w-5 rounded text-secondary focus:ring-secondary"}),(0,s.jsx)("span",{className:"text-body-md group-hover:text-secondary ".concat(e.completed?"line-through text-surface-on-variant":""),children:e.text})]}),(0,s.jsx)(W,{onClick:()=>eu(e.id,M),variant:"text",size:"sm",isIconOnly:!0,title:"Delete goal",className:"text-error hover:bg-error-container/20",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]},e.id))}):(0,s.jsx)("p",{className:"text-center text-sm text-surface-on-variant py-3",children:"No goals set for this week."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(G.A,{className:"w-6 h-6 text-tertiary mr-2"}),(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on",children:"Weekly Notes"})]}),(0,s.jsx)("textarea",{value:z,onChange:e=>P(e.target.value),placeholder:"General thoughts for the week...",rows:5,className:"w-full p-3 bg-surface-container border border-outline-variant rounded-xl text-body-lg","aria-label":"Weekly notes"})]})]}),(0,s.jsx)("div",{className:"mt-8 flex justify-center",children:(0,s.jsx)(W,{onClick:()=>{let e="Week of ".concat(t$(b),"\n\n");E.length>0&&(e+="--- Weekly Goals ---\n",E.forEach(t=>{e+="- [".concat(t.completed?"X":" ","] ").concat(t.text,"\n")}),e+="\n"),z.trim()&&(e+="--- Weekly Notes ---\n"+z.trim()+"\n\n"),e+="--- Today's Focus: ".concat(v.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})," ---\n"),w&&(e+="Mood: ".concat(w,"\n")),C.length>0&&C.forEach(t=>{e+="- [".concat(t.completed?"X":" ","] ").concat(t.text,"\n")}),D.trim()&&(e+="Notes & Tasks:\n"+D.trim()+"\n"),l(e)},variant:"filled",size:"lg",leadingIcon:(0,s.jsx)(eD.A,{}),disabled:!(E.length>0||z.trim()||w||C.length>0||D.trim()),"aria-label":"Save current plans to journal",children:"Save Plan to Journal"})})]})}),"calendar"===g&&(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(tL,{viewMode:Y,onViewChange:e=>J(e),onAddEvent:()=>ef()}),(()=>{let e={currentDisplayDate:B,events:er,journalEntries:en,thoughtRecords:ei,onPrev:eh,onNext:ex,currentDateTitle:ev(),onViewJournalEntry:x,onViewThoughtRecord:f};switch(Y){case"month":return(0,s.jsx)(tU,{...e,onDateClick:ep,onEventClick:eg});case"week":return(0,s.jsx)(tB,{...e,onDateClick:ep,onEventClick:eg});case"day":return(0,s.jsx)(tW,{...e,onEventClick:eg,onAddEvent:ef});default:return null}})()]}),(0,s.jsx)(tJ,{isOpen:H,onClose:()=>V(!1),onSave:e=>{e.id?u(e):m(e),V(!1)},eventToEdit:X,initialDate:$}),(0,s.jsx)(tK,{isOpen:ee,onClose:()=>et(!1),event:ea,onEdit:e=>{Z(e),Q(t_(e.start)),V(!0)},onDelete:h})]})},t4=e=>{let{isOpen:t,onClose:a,onSave:n,initialData:i}=e,[l,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[f,g]=(0,r.useState)(null),p=(0,r.useRef)(null);return(0,r.useEffect)(()=>{t&&(i?(o(i.name),d(i.dosage),u(i.frequency),x(i.notes||"")):(o(""),d(""),u(""),x("")),g(null),setTimeout(()=>{var e;return null==(e=p.current)?void 0:e.focus()},100))},[t,i]),(0,s.jsx)(eJ,{isOpen:t,onClose:a,title:i?"Edit Medication":"Add New Medication",children:(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!l.trim()||!c.trim()||!m.trim())return void g("Name, Dosage, and Frequency are required.");n({id:null==i?void 0:i.id,name:l.trim(),dosage:c.trim(),frequency:m.trim(),notes:h.trim()||void 0}),a()},className:"space-y-7 p-6",children:[f&&(0,s.jsx)("div",{className:"bg-error-container text-on-error-container p-3 rounded-lg text-sm",role:"alert",children:f}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"medName",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Medication Name ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{ref:p,type:"text",id:"medName",value:l,onChange:e=>o(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant",placeholder:"e.g., Ibuprofen",required:!0,"aria-required":"true"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"medDosage",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Dosage ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"medDosage",value:c,onChange:e=>d(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant",placeholder:"e.g., 200mg, 1 tablet",required:!0,"aria-required":"true"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"medFrequency",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Frequency ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"medFrequency",value:m,onChange:e=>u(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant",placeholder:"e.g., Daily, Twice a day, As needed",required:!0,"aria-required":"true"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"medNotes",className:"block text-sm font-medium text-surface-on-variant mb-1",children:"Notes (Optional)"}),(0,s.jsx)("textarea",{id:"medNotes",value:h,onChange:e=>x(e.target.value),rows:3,className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant",placeholder:"e.g., Take with food, For headaches"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,s.jsx)(W,{type:"button",variant:"text",onClick:a,children:"Cancel"}),(0,s.jsx)(W,{type:"submit",variant:"filled",leadingIcon:(0,s.jsx)(eD.A,{}),children:i?"Save Changes":"Add Medication"})]})]})})};var t5=a(8376);let t3=e=>{let{medication:t,onLogTaken:a,onEdit:r,onDelete:n}=e;return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl p-5 sm:p-6 hover:shadow-xl transition-shadow duration-300",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-serif text-title-lg text-surface-on",children:t.name}),(0,s.jsxs)("p",{className:"text-body-md text-surface-on-variant",children:[t.dosage," - ",t.frequency]})]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(W,{variant:"text",size:"sm",isIconOnly:!0,title:"Edit Medication",onClick:()=>r(t),"aria-label":"Edit ".concat(t.name),children:(0,s.jsx)(eR.A,{className:"w-5 h-5"})}),(0,s.jsx)(W,{variant:"text",size:"sm",isIconOnly:!0,title:"Delete Medication",onClick:()=>{n(t.id)},"aria-label":"Delete ".concat(t.name),className:"text-error hover:bg-error-container/20",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]})]}),t.notes&&(0,s.jsxs)("p",{className:"text-body-sm text-surface-on-variant italic bg-surface-container p-2 rounded-md mb-3",children:["Notes: ",t.notes]}),(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(t5.A,{className:"w-5 h-5"}),onClick:()=>a(t),className:"w-full","aria-label":"Log ".concat(t.name," as taken"),children:"Log Taken Now"})]})},t6=e=>{let{logs:t}=e;if(0===t.length)return(0,s.jsx)("p",{className:"text-center text-surface-on-variant py-8 text-body-lg",children:"No medication intakes logged yet."});let a=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",month:"short",day:"numeric"});return(0,s.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-surface-container-low p-4 rounded-lg shadow-sm flex items-center space-x-3",children:[(0,s.jsx)(t5.A,{className:"w-5 h-5 text-secondary flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("p",{className:"text-body-md text-surface-on",children:[(0,s.jsx)("span",{className:"font-medium",children:e.medicationName})," (",e.dosage,")"]}),(0,s.jsxs)("p",{className:"text-label-sm text-surface-on-variant",children:["Logged at: ",a(e.timestamp)]})]})]},e.id))})},t8=e=>{let{isOpen:t,onClose:a,onSave:n,existingMedications:i,initialData:l}=e,[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(new Set),[u,h]=(0,r.useState)(null),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{t&&(l?(c(l.name),m(new Set(l.medicationIds))):(c(""),m(new Set)),h(null),setTimeout(()=>{var e;return null==(e=x.current)?void 0:e.focus()},100))},[t,l]);let f=e=>{m(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},g=[...i].sort((e,t)=>e.name.localeCompare(t.name));return(0,s.jsx)(eJ,{isOpen:t,onClose:a,title:l?"Edit Medication Bundle":"Create New Medication Bundle",children:(0,s.jsxs)("form",{onSubmit:e=>(e.preventDefault(),o.trim())?0===d.size?void h("Please select at least one medication for the bundle."):void(n({id:null==l?void 0:l.id,name:o.trim(),medicationIds:Array.from(d)}),a()):void h("Bundle name is required."),className:"space-y-7 p-6",children:[u&&(0,s.jsx)("div",{className:"bg-error-container text-on-error-container p-3 rounded-lg text-sm",role:"alert",children:u}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"groupName",className:"block text-sm font-medium text-surface-on-variant mb-1",children:["Bundle Name ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),(0,s.jsx)("input",{ref:x,type:"text",id:"groupName",value:o,onChange:e=>c(e.target.value),className:"w-full p-4 bg-surface-container-low border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-lg text-surface-on placeholder-surface-on-variant",placeholder:"e.g., Morning Pills, Bedtime Routine",required:!0,"aria-required":"true"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-surface-on-variant mb-2",children:["Select Medications for this Bundle ",(0,s.jsx)("span",{className:"text-error",children:"*"})]}),g.length>0?(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2 border border-outline-variant p-3 rounded-lg bg-surface",children:g.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-surface-container cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.has(e.id),onChange:()=>f(e.id),className:"h-5 w-5 rounded text-primary focus:ring-primary border-outline-variant"}),(0,s.jsxs)("span",{className:"text-body-md text-surface-on",children:[e.name," ",(0,s.jsxs)("span",{className:"text-sm text-surface-on-variant",children:["(",e.dosage,", ",e.frequency,")"]})]})]},e.id))}):(0,s.jsx)("p",{className:"text-sm text-surface-on-variant italic",children:"No medications available to add to a bundle. Please add medications first."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,s.jsx)(W,{type:"button",variant:"text",onClick:a,children:"Cancel"}),(0,s.jsx)(W,{type:"submit",variant:"filled",leadingIcon:(0,s.jsx)(eD.A,{}),children:l?"Save Changes":"Create Bundle"})]})]})})};var t7=a(7374),t9=a(7381),ae=a(9556);let at=e=>{let{group:t,medications:a,onLogBundle:n,onEdit:i,onDelete:l}=e,[o,c]=r.useState(!1),d=t.medicationIds.map(e=>a.find(t=>t.id===e)).filter(Boolean);return(0,s.jsxs)("div",{className:"bg-surface-container-low shadow-lg rounded-xl p-5 sm:p-6 hover:shadow-xl transition-shadow duration-300",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(t7.A,{className:"w-6 h-6 text-secondary"}),(0,s.jsx)("h3",{className:"font-serif text-title-lg text-surface-on",children:t.name}),(0,s.jsxs)("span",{className:"text-sm text-surface-on-variant",children:["(",d.length," meds)"]})]}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(W,{variant:"text",size:"sm",isIconOnly:!0,title:"Edit Bundle",onClick:()=>i(t),"aria-label":"Edit bundle ".concat(t.name),children:(0,s.jsx)(eR.A,{className:"w-5 h-5"})}),(0,s.jsx)(W,{variant:"text",size:"sm",isIconOnly:!0,title:"Delete Bundle",onClick:()=>l(t.id),"aria-label":"Delete bundle ".concat(t.name),className:"text-error hover:bg-error-container/20",children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]})]}),d.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(W,{onClick:()=>c(!o),variant:"text",size:"sm",className:"text-xs text-surface-on-variant",trailingIcon:o?(0,s.jsx)(t9.A,{className:"w-4 h-4"}):(0,s.jsx)(ae.A,{className:"w-4 h-4"}),"aria-expanded":o,"aria-controls":"bundle-meds-".concat(t.id),children:o?"Hide Medications":"Show Medications"}),o&&(0,s.jsx)("ul",{id:"bundle-meds-".concat(t.id),className:"list-disc list-inside mt-2 pl-4 space-y-1 text-sm text-surface-on-variant",children:d.map(e=>(0,s.jsxs)("li",{children:[e.name," (",e.dosage,")"]},e.id))})]}),0===d.length&&(0,s.jsx)("p",{className:"text-sm text-surface-on-variant italic mb-3",children:"This bundle is empty. Edit to add medications."}),(0,s.jsx)(W,{variant:"filled",size:"md",leadingIcon:(0,s.jsx)(ec.A,{className:"w-5 h-5"}),onClick:()=>n(t.id),className:"w-full","aria-label":"Log all medications in bundle ".concat(t.name," as taken"),disabled:0===d.length,children:"Log All in Bundle Taken"})]})},aa=e=>{let{medications:t,medicationLogs:a,medicationGroups:n,onAddMedication:i,onUpdateMedication:l,onDeleteMedication:o,onLogMedicationIntake:c,onClearMedicationLog:d,onAddMedicationGroup:m,onUpdateMedicationGroup:u,onDeleteMedicationGroup:h,onLogMedicationBundle:x}=e,[f,g]=(0,r.useState)(!1),[p,v]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[w,k]=(0,r.useState)("medications"),C=e=>{v(e),g(!0)},S=e=>{N(e),j(!0)},A=[...a].sort((e,t)=>t.timestamp-e.timestamp),I=[...t].sort((e,t)=>t.addedTimestamp-e.addedTimestamp),D=[...n].sort((e,t)=>e.name.localeCompare(t.name));return(0,s.jsxs)("div",{className:"space-y-10 animate-in fade-in-0 duration-750 max-w-3xl w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)($.A,{className:"w-8 h-8 text-primary transform rotate-90"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"Medication Tracker"})]}),(0,s.jsx)(W,{variant:"filled",size:"md",leadingIcon:(0,s.jsx)(eg.A,{}),onClick:()=>{v(null),g(!0)},className:"w-full sm:w-auto","aria-label":"Add new medication",children:"Add New Medication"})]}),(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)(tO,{value:w,onChange:e=>k(e),options:[{value:"medications",label:"My Medications"},{value:"log",label:"Log"}]})}),"medications"===w&&(0,s.jsxs)("div",{className:"space-y-10",children:[(0,s.jsxs)("section",{"aria-labelledby":"medication-bundles-heading",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(t7.A,{className:"w-7 h-7 text-secondary"}),(0,s.jsx)("h3",{id:"medication-bundles-heading",className:"font-serif text-headline-sm text-surface-on",children:"My Medication Bundles"})]}),(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(eg.A,{}),onClick:()=>{N(null),j(!0)},className:"w-full sm:w-auto","aria-label":"Create new medication bundle",disabled:0===t.length,children:"Create New Bundle"})]}),0===t.length&&(0,s.jsx)("p",{className:"text-sm text-center text-surface-on-variant py-4 italic",children:"Add medications first to create bundles."}),t.length>0&&0===D.length&&(0,s.jsx)("p",{className:"text-center text-surface-on-variant py-8 text-body-lg",children:'No medication bundles created yet. Click "Create New Bundle".'}),D.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(e=>(0,s.jsx)(at,{group:e,medications:t,onLogBundle:x,onEdit:S,onDelete:h},e.id))})]}),(0,s.jsxs)("section",{"aria-labelledby":"medications-list-heading",className:"pt-10 border-t border-outline-variant",children:[(0,s.jsx)("h3",{id:"medications-list-heading",className:"font-serif text-headline-sm text-surface-on mb-4",children:"All Individual Medications"}),0!==I.length||f?(0,s.jsx)("div",{className:"space-y-4",children:I.map(e=>(0,s.jsx)(t3,{medication:e,onLogTaken:c,onEdit:C,onDelete:o},e.id))}):(0,s.jsx)("p",{className:"text-center text-surface-on-variant py-8 text-body-lg",children:"No medications added yet."})]})]}),"log"===w&&(0,s.jsxs)("section",{"aria-labelledby":"medication-log-heading",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{id:"medication-log-heading",className:"font-serif text-headline-sm text-surface-on",children:"Medication Log"}),a.length>0&&(0,s.jsx)(W,{variant:"outlined",size:"sm",leadingIcon:(0,s.jsx)(ez.A,{className:"w-4 h-4"}),onClick:d,"aria-label":"Clear entire medication log",className:"text-error hover:bg-error-container/20 border-error",children:"Clear Log"})]}),(0,s.jsx)("div",{className:"bg-surface-container p-6 rounded-xl shadow",children:(0,s.jsx)("div",{className:"max-h-[600px] overflow-y-auto",children:(0,s.jsx)(t6,{logs:A})})})]}),(0,s.jsx)(t4,{isOpen:f,onClose:()=>g(!1),onSave:e=>{if(e.id){let a=t.find(t=>t.id===e.id);a&&l({...a,name:e.name,dosage:e.dosage,frequency:e.frequency,notes:e.notes})}else i(e)},initialData:p}),(0,s.jsx)(t8,{isOpen:b,onClose:()=>j(!1),onSave:e=>{if(e.id){let t=n.find(t=>t.id===e.id);t&&u({...t,name:e.name,medicationIds:e.medicationIds})}else m(e.name,e.medicationIds)},existingMedications:t,initialData:y})]})};var as=a(8098);let ar=e=>{let{className:t="w-6 h-6 text-blue-500"}=e;return(0,s.jsxs)("svg",{className:"animate-spin ".concat(t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},an=["I am capable and strong, and I face challenges with courage.","I choose to be happy and grateful today, embracing all life offers.","I am worthy of love, respect, and all good things life brings.","I embrace challenges as opportunities for profound growth and learning.","I am resilient and can overcome any obstacle with grace and determination.","I trust in my unique abilities and listen to my inner wisdom.","I attract positivity, abundance, and joy into my life effortlessly.","I am at peace with who I am, and I celebrate my journey.","I make a positive and meaningful impact on the world around me.","Every day is a new beginning, filled with endless potential and hope.","I am surrounded by love, support, and understanding.","I believe deeply in myself and my dreams, and I pursue them with passion.","I forgive myself and others, releasing the past and embracing the present.","I am a creative and resourceful being, capable of finding solutions.","I radiate confidence, self-assurance, and inner calm.","My body is healthy, my mind is brilliant, my soul is tranquil.","I am creating the life of my dreams, one step at a time.","I have the power to create change and make a difference.","I am grateful for all the blessings in my life, big and small.","I release all doubts and fears, and I step into my power.","Embracing support empowers me; seeking help is a testament to my strength and awareness.","Flexibility is my superpower; changing my mind is a sign of growth, not weakness.","Every choice I make is grounded in my rich and undeniable personal journey.","I uplift others with the same encouragement and affirmation I offer myself.","My authentic self is a truth only I can define and embody.","I am fully entitled to voice my desires and needs.","Joy is my birthright; I allow myself to feel good and embrace happiness.","I possess the innate ability to harmonize ease and effort within my life's rhythm.","I am whole and complete in this moment; others enhance my journey, they do not define it.","A sense of peace and freedom from suffering fills me.","I am engaged in fulfilling work that aligns with my purpose and well-being.","I am inherently good, and I am continuously evolving for the better.","My growth journey is unique, and I am progressing at my perfect pace.","I am cradled and sustained by the love of those around me.","My emotional state is within my control; I consciously choose happiness.","I am receptive and open to the profound messages the universe unfolds for me daily.","I am cherished and inherently worthy of all good things.","My potential transcends any current circumstances.","I am open and welcoming to the process of healing and restoration.","Optimism guides me, for each day presents a fresh beginning and new possibilities.","I reside in a state of inner peace and completeness.","My very existence is evidence of who I am and what I deserve.","My responsibility begins with myself, and I build my strength from that foundation.","I am secure and enveloped by a network of love and unwavering support.","Learning is a lifelong journey, and making mistakes is an integral, acceptable part of it.","My voice is heard, and my unique perspective holds significant value.","I am a valuable contributor and an appreciated presence.","I am well-rested, energized, and enthusiastic for the day ahead.","I am deserving of self-investment, knowing it yields abundant returns.","I belong exactly where I am, and I have every right to occupy my space fully.","With each breath, I inhale healing energy, releasing all burdens and sorrows from my heart.","I breathe in unwavering trust and exhale all traces of doubt.","My heart can be tender and compassionate, while my boundaries remain strong and clear.","I have the power to consciously choose my response to challenging situations.","Holding contrasting emotions simultaneously is a sign of deep processing and growth.","I joyfully acknowledge and celebrate the good within myself and in others.","I am worthy of respectful physical connection, on my own terms.","I deserve access to information, and equally, moments of peaceful silence.","Self-respect is my due, and I thrive in a clean and organized environment.","Love is the guiding principle behind all my actions.","I do not have to remain in challenging places; assistance and light are always available to me.","I live authentically, presenting only my true self to the world.","My worth is intrinsic; I do not depend on others to define or elevate me.","I move through life with mindful intention, balancing activity with moments of serene stillness.","I embrace change gracefully, seeing each shift as a fresh opportunity for growth.","I nurture myself with empowering words and nourishing, joyful foods.","I welcome the mysteries in my heart, trusting that answers will unfold at the perfect time.","I naturally gravitate towards what inspires me, like a plant reaching for life-giving sunlight.","I have journeyed further than I ever imagined, learning and evolving with every step.","I possess all the necessary resources and inner strength for success.","I contribute to my community and receive steadfast support from it in return.","My intuition holds a profound wisdom that transcends mere knowledge.","I open my life to abundance and cultivate a generous spirit.","I invite artistic expression and harmonious music to enrich my daily existence.","I create space in my life for delightful spontaneity and unexpected adventures.","I release attachment to what is unattainable, freeing my energy for what is truly meant for me.","I anticipate tomorrow with excitement, eager for the opportunities it holds.","I revel in my passions and celebrate the things that bring me joy.","My decisions are guided by my inner wisdom, and my growth prompts necessary adjustments.","I dedicate time to fully experience grief and sadness when they arise, allowing for natural processing.","I nourish my being with kind words and wholesome, joyful foods.","I practice deep gratitude for all that I possess and all that is yet to manifest.","I release any fears that no longer serve my highest good.","I honor and respect the natural rhythms and cycles of life's seasons.","I actively seek out the magic and wonder hidden within everyday moments.","My aim is authentic joy, not an unattainable perfection.","I welcome the profound wisdom that accompanies the journey of aging.","I communicate my true self and my needs to others with honesty and clarity.","I elevate my own joy and contribute to the happiness of those around me.","I embrace the wisdom that comes with the passage of time and experience.","I greet what is present and welcome what is yet to come with an open heart.","I grant myself permission to continuously grow and transform.","Releasing what no longer serves me creates fertile ground for new opportunities to flourish.","My body is a beautiful and worthy vessel in this very moment, at its current form.","My body deserves devoted care and the adornment of garments that make me feel beautiful.","My emotions deserve to be identified, acknowledged, and fully experienced.","My heart is open to receiving support and helpfulness, both from myself and from others.","My heart possesses its own infallible compass, guiding me true.","My life is a unique journey, not a competition or a race against anyone else.","My viewpoint is singular and holds immense significance.","My happiness does not depend on, nor should it ever cause, another's suffering.","My sensitivity is a beautiful facet of who I am, and all my feelings and emotions are valid.","My unique quirks and eccentricities are wonderfully part of me.",'The act of saying "no" is a powerful affirmation of my self-worth and boundaries.',"Rest is productive work; sometimes the greatest progress comes from stillness.","Profound growth can be found in moments of quiet reflection and stillness.","There is peace and integrity in altering my perspective when motivated by love.","I discover poetry and beauty in every aspect of life, if I only choose to look for it.","There is a rightful place for me at every table; I am deserving of inclusion.","There is a singular contribution only I can offer to the world; this is my purpose for being here.","There is immense power in quiet strength, and vulnerability in speaking loudly.","Today, I celebrate the vitality of being younger than I will ever be again.","Each new day is a precious chance to grow, learn, and expand.","When fear arises, I consciously choose to feed my trust instead.","When I align with my deepest purpose, I become infinitely courageous.","Forgiving myself is the ultimate act of liberation.","Releasing shame allows me to step more fully and beautifully into my true self.","As I connect with the earth, it reciprocates by rising to support me.","When I clearly articulate my needs, they are met abundantly.","By treating myself with the kindness and understanding I'd offer a friend, I illuminate my best qualities and allow my true radiance to shine.","While words can influence me, they do not define my essence; I already exist, whole and complete.","I embrace imperfections as unique textures in the masterpiece of my life.","My intuition is a trusted guide, leading me toward my highest good.","I am capable of navigating challenges with grace and resilience.","Every step I take is a step towards my authentic self.","I create my own opportunities through my dedication and passion.","My creativity flows freely, manifesting beauty in all I do.","I am a powerful creator of my reality, shaping my world with intention.","Inspiration finds me in unexpected places, fueling my creative spirit.","I trust my artistic vision and bring it to life with confidence.","My designs tell a story, and I am the master storyteller.","I learn from every project, refining my craft with each new challenge.","My work brings joy and value to others, reflecting my unique perspective.","I am an endless source of innovative ideas and fresh perspectives.","I celebrate my progress, no matter how small, knowing it leads to great achievements."],ai=e=>{let{profileData:t,onUpdateProfile:a}=e,[n,i]=(0,r.useState)(null),{toast:l}=(0,ew.dj)();(0,r.useEffect)(()=>{i(Math.floor(Math.random()*an.length))},[]);let o=(0,r.useCallback)(()=>{null!==n&&i(e=>{let t=e;for(;t===e;)t=Math.floor(Math.random()*an.length);return t})},[n]),c=(0,r.useMemo)(()=>null===n?null:an[n],[n]),d=(0,r.useMemo)(()=>!!c&&!!t.favoriteAffirmations&&t.favoriteAffirmations.includes(c),[c,t.favoriteAffirmations]);return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-10rem)] py-12 animate-in fade-in-0 duration-1000",children:(0,s.jsxs)("div",{className:"text-center p-4 sm:p-8 lg:p-12 bg-gradient-to-br from-primary-container via-secondary-container/30 to-tertiary-container/20 rounded-3xl shadow-2xl max-w-2xl w-full transform transition-all hover:scale-[1.01] duration-500",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,s.jsx)(Z.A,{className:"w-16 h-16 text-primary mb-3"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-on-primary-container",children:"Your Daily Affirmation"}),(0,s.jsx)("p",{className:"text-body-lg text-on-primary-container/80 mt-1",children:"Embrace positivity and empower your day."})]}),(0,s.jsx)("div",{className:"my-10 p-6 bg-surface/80 rounded-2xl min-h-[150px] flex items-center justify-center",role:"region","aria-live":"polite","aria-atomic":"true",children:c?(0,s.jsxs)("p",{className:"font-serif text-headline-md sm:text-display-sm text-surface-on leading-tight",children:['"',c,'"']}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-surface-on-variant",children:[(0,s.jsx)(ar,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("p",{className:"mt-2 text-sm",children:"Finding your inspiration..."})]})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-8",children:[(0,s.jsx)(W,{onClick:o,variant:"filled",size:"lg",leadingIcon:(0,s.jsx)(ef.A,{}),"aria-label":"Show another affirmation",disabled:null===c,children:"Show Another"}),(0,s.jsx)(W,{variant:"tonal",size:"lg",leadingIcon:(0,s.jsx)(as.A,{className:d?"fill-current":""}),onClick:()=>{let e;if(!c)return;let s=t.favoriteAffirmations||[];d?(e=s.filter(e=>e!==c),l({title:"Removed from Favorites"})):(e=[...s,c],l({title:"Added to Favorites!"})),a({...t,favoriteAffirmations:e})},disabled:null===c,"aria-label":d?"Remove from favorites":"Favorite this affirmation",children:d?"Favorited":"Favorite"})]})]})})};var al=a(2733),ao=a(518),ac=a(5844),ad=a(7057),am=a(1314),au=a(8718);let ah=["Adventurous","Ambition","Artistic Ability","Assertiveness","Athleticism","Bravery","Common Sense","Confidence","Cooperation","Creativity","Curiosity","Discipline","Empathy","Enthusiasm","Fairness","Flexibility","Forgiveness","Gratitude","Honesty","Humor","Independence","Intelligence","Kindness","Leadership","Logic","Love","Love of Learning","Mindedness","Modesty","Optimism","Patience","Persistence","Self-Control","Social Awareness","Spirituality","Wisdom"];var ax=a(4884);let af=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ax.bL,{className:(0,U.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(ax.zi,{className:(0,U.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});af.displayName=ax.bL.displayName;let ag=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,U.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});ag.displayName="Card";let ap=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,U.cn)("flex flex-col space-y-1.5 p-6",a),...r})});ap.displayName="CardHeader";let av=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,U.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});av.displayName="CardTitle";let ab=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,U.cn)("text-sm text-muted-foreground",a),...r})});ab.displayName="CardDescription";let aj=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,U.cn)("p-6 pt-0",a),...r})});aj.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,U.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";let ay=(0,tr.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function aN(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,U.cn)(ay({variant:a}),t),...r})}let aw=()=>{let[e,t]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=e=>{e.preventDefault(),t(e)};window.addEventListener("beforeinstallprompt",e);let a=()=>{t(null)};return window.addEventListener("appinstalled",a),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",a)}},[]);let a=(0,r.useCallback)(async()=>{e&&(await e.prompt(),t(null))},[e]);return{installPrompt:e,handleInstallClick:a}},ak={planner:{label:"Planner Widget",description:"Shows today's goals and progress."},affirmations:{label:"Affirmations Widget",description:"Displays your favorite affirmations."},medication:{label:"Medication Widget",description:"Tracks medication counts and bundles."},copingMechanisms:{label:"Coping Strategies Widget",description:"Displays one of your quick strategies."}},aC=[{name:"echo",label:"Echo",bgColor:"hsl(205 75% 45%)",textColor:"hsl(0 0% 100%)"},{name:"forest",label:"Forest",bgColor:"hsl(110 35% 45%)",textColor:"hsl(110 35% 98%)"},{name:"buttercup",label:"Buttercup",bgColor:"hsl(45 80% 60%)",textColor:"hsl(45 25% 15%)"},{name:"sunset",label:"Sunset",bgColor:"hsl(20 80% 45%)",textColor:"hsl(20 80% 98%)"}],aS=e=>{let{profileData:t,onUpdateProfile:a,currentTheme:n,currentPalette:i,onToggleTheme:l,onChangePalette:o,onDownloadJournal:c,onClearJournal:d,onClearPlanner:m,onClearMedication:u,onClearAllData:h,onNavigateToView:x,onReOnboard:f}=e,[g,p]=(0,r.useState)(""),[v,b]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),[N,w]=(0,r.useState)({}),[k,C]=(0,r.useState)([]),[S,A]=(0,r.useState)(""),[I,D]=(0,r.useState)(!0),[T,E]=(0,r.useState)(!1),{installPrompt:M,handleInstallClick:_}=aw();(0,r.useEffect)(()=>{p(t.name||""),b(t.strengths||[]),y(t.copingMechanisms||[]),w(t.dashboardWidgets||{}),C(t.favoriteAffirmations||[]),D(!0)},[t]);let R=(0,r.useCallback)(()=>{D(!1)},[]);(0,r.useEffect)(()=>{var e;g!==t.name||JSON.stringify(v.sort())!==JSON.stringify((null==(e=t.strengths)?void 0:e.sort())||[])||JSON.stringify(j)!==JSON.stringify(t.copingMechanisms)||JSON.stringify(N)!==JSON.stringify(t.dashboardWidgets)||JSON.stringify(k)!==JSON.stringify(t.favoriteAffirmations)?R():D(!0)},[g,v,j,N,k,t,R]);let z=e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},P=e=>{C(t=>t.filter(t=>t!==e))},L=e=>w(t=>({...t,[e]:!t[e]}));return(0,s.jsxs)("div",{className:"space-y-10 animate-in fade-in-0 duration-750 max-w-4xl w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(O.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"Profile & Settings"})]}),(0,s.jsx)(W,{onClick:()=>{a({name:g.trim(),strengths:v,copingMechanisms:j,dashboardWidgets:N,favoriteAffirmations:k}),D(!0)},variant:"filled",size:"md",leadingIcon:(0,s.jsx)(eD.A,{}),disabled:I,children:I?"Saved":"Save Changes"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsx)(ap,{children:(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(O.A,{className:"w-5 h-5"})," Personal Information"]})}),(0,s.jsxs)(aj,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"userName",className:"block text-sm font-medium text-surface-on-variant mb-1",children:"Your Name"}),(0,s.jsx)("input",{id:"userName",type:"text",value:g,onChange:e=>p(e.target.value),placeholder:"What should we call you?",className:"w-full p-4 bg-surface-container border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-xl text-surface-on placeholder-surface-on-variant"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"block text-sm font-medium text-surface-on-variant mb-1",children:"Account"}),(0,s.jsx)("p",{className:"w-full p-4 bg-surface border border-outline-variant rounded-xl text-surface-on-variant truncate",children:"Guest Mode"})]})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsx)(ap,{children:(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(al.A,{className:"w-5 h-5"})," Appearance"]})}),(0,s.jsxs)(aj,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-surface rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-surface-on",children:"Theme"}),(0,s.jsxs)(W,{variant:"tonal",size:"sm",leadingIcon:"light"===n?(0,s.jsx)(ei.A,{}):(0,s.jsx)(en.A,{}),onClick:l,children:["Switch to ","light"===n?"Dark":"Light"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-surface-on mb-3",children:"Color Palette"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:aC.map(e=>(0,s.jsxs)("button",{onClick:()=>o(e.name),style:{backgroundColor:e.bgColor,color:e.textColor},className:(0,U.cn)("inline-flex items-center justify-center gap-1.5 whitespace-nowrap rounded-full text-xs font-medium px-4 h-8 transition-all","hover:brightness-110 active:brightness-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",i===e.name&&"ring-2 ring-offset-2 ring-ring"),children:[(0,s.jsx)("span",{children:e.label}),i===e.name&&(0,s.jsx)(ao.A,{className:"w-4 h-4"})]},e.name))})]})]})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsxs)(ap,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(as.A,{className:"w-5 h-5"})," My Strengths"]}),!T&&(0,s.jsx)(W,{variant:"tonal",size:"sm",onClick:()=>E(!0),children:"Edit"})]}),!T&&(0,s.jsx)(ab,{children:'A reminder of your best qualities. Click "Edit" to update.'})]}),(0,s.jsx)(aj,{children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:"Select the qualities that resonate with you."}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:ah.map(e=>{let t=v.includes(e);return(0,s.jsx)("button",{onClick:()=>z(e),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 border ".concat(t?"bg-secondary-container border-secondary-container text-on-secondary-container":"bg-surface border-outline-variant hover:border-outline text-surface-on-variant"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[e,t&&(0,s.jsx)(ao.A,{className:"w-4 h-4"})]})},e)})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,s.jsx)(W,{variant:"text",onClick:()=>{E(!1),b(t.strengths||[])},children:"Cancel"}),(0,s.jsx)(W,{variant:"tonal",onClick:()=>E(!1),children:"Done"})]})]}):(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:v.length>0?v.map(e=>(0,s.jsx)(aN,{variant:"secondary",className:"text-base px-3 py-1 bg-secondary-container text-on-secondary-container border-transparent",children:e},e)):(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant italic",children:'No strengths selected yet. Click "Edit" to add some.'})})})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsxs)(ap,{children:[(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(as.A,{className:"w-5 h-5 text-yellow-500"})," My Affirmations"]}),(0,s.jsx)(ab,{children:"Manage your list of custom and favorite affirmations."})]}),(0,s.jsx)(aj,{children:k.length>0?(0,s.jsx)("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:k.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center justify-between p-3 bg-surface rounded-lg",children:[(0,s.jsxs)("p",{className:"text-body-md text-surface-on flex-grow mr-2",children:['"',e,'"']}),(0,s.jsx)(W,{variant:"text",size:"sm",isIconOnly:!0,title:"Remove affirmation",className:"text-error hover:bg-error-container/20",onClick:()=>P(e),children:(0,s.jsx)(ez.A,{className:"w-5 h-5"})})]},t))}):(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant italic",children:"No affirmations favorited yet. Find some on the Affirmations page!"})})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsxs)(ap,{children:[(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(ac.A,{className:"w-5 h-5"})," Dashboard Customization"]}),(0,s.jsx)(ab,{children:"Choose which widgets appear on your dashboard."})]}),(0,s.jsx)(aj,{className:"space-y-3",children:Object.entries(ak).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-surface rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-surface-on",children:a.label}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant",children:a.description})]}),(0,s.jsx)(af,{checked:!!N[t],onCheckedChange:()=>L(t),"aria-label":"Toggle ".concat(a.label," widget")})]},t)})})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsx)(ap,{children:(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(ad.A,{className:"w-5 h-5"})," Data & Information"]})}),(0,s.jsxs)(aj,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[M&&(0,s.jsx)(W,{variant:"filled",size:"md",leadingIcon:(0,s.jsx)(am.A,{}),onClick:_,children:"Install App"}),(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(au.A,{}),onClick:c,children:"Export Journal"}),(0,s.jsx)(W,{variant:"tonal",size:"md",leadingIcon:(0,s.jsx)(ac.A,{}),onClick:()=>x("designSystem"),children:"View Design System"})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-lg border-none",children:[(0,s.jsxs)(ap,{children:[(0,s.jsxs)(av,{className:"flex items-center gap-2",children:[(0,s.jsx)(tq.A,{className:"w-5 h-5 text-error"})," Danger Zone"]}),(0,s.jsx)(ab,{className:"!text-error/80",children:"These actions are irreversible. Please be certain before proceeding."})]}),(0,s.jsxs)(aj,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-surface rounded-lg border border-outline-variant space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium text-surface-on",children:"Clear Journal & Planner"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant",children:"Permanently delete all entries, records, and plans."}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)(W,{variant:"outlined",size:"sm",onClick:d,className:"text-error hover:bg-error-container/20 border-error",children:"Journal"}),(0,s.jsx)(W,{variant:"outlined",size:"sm",onClick:m,className:"text-error hover:bg-error-container/20 border-error",children:"Planner"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-surface rounded-lg border border-outline-variant space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium text-surface-on",children:"Clear Medication Data"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant",children:"Permanently delete all meds, bundles, and logs."}),(0,s.jsx)(W,{variant:"outlined",size:"sm",onClick:u,className:"text-error hover:bg-error-container/20 border-error mt-6",children:"Clear Meds"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 p-4 bg-error-container/40 rounded-lg mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-on-error-container",children:"Clear All Application Data"}),(0,s.jsx)("p",{className:"text-sm text-on-error-container/80",children:"Permanently delete EVERYTHING. This cannot be undone."})]}),(0,s.jsx)(W,{variant:"filled",size:"sm",onClick:h,leadingIcon:(0,s.jsx)(ez.A,{}),className:"!bg-error !text-on-error shrink-0",children:"Clear All Data"})]})]})]}),(0,s.jsx)("div",{className:"text-center pt-6 border-t border-outline-variant",children:(0,s.jsx)(W,{variant:"text",size:"sm",leadingIcon:(0,s.jsx)(ef.A,{}),onClick:f,children:"Re-run Onboarding (for testing)"})})]})};var aA=a(3640),aI=a(7724),aD=a(960),aT=a(3152);let aE=[{id:"rain-exercise",text:"Practice the RAIN mindfulness exercise"},{id:"grounding-54321",text:"Use the 5-4-3-2-1 grounding technique"},{id:"distress-accepts",text:"Use ACCEPTS for distress tolerance"},{id:"urge-surfing",text:'Practice "Urge Surfing"'},{id:"categories-exercise",text:"Use the Categories distraction technique"}],aM=e=>{let{title:t,description:a,icon:r,view:n,onNavigate:i}=e;return(0,s.jsxs)("div",{className:"bg-surface rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"text-primary mt-1",children:r}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("h4",{className:"text-title-lg font-medium text-surface-on",children:t}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mt-1 mb-4",children:a})]})]}),(0,s.jsx)(W,{variant:"tonal",size:"md",onClick:()=>i(n),className:"mt-auto self-start",trailingIcon:(0,s.jsx)(eZ.A,{}),children:"Learn More"})]})},a_=e=>{let{id:t,title:a,icon:r,isAdded:n,onAdd:i,children:l,className:o}=e;return(0,s.jsxs)(ag,{className:(0,U.cn)("bg-surface-container-low shadow-sm border-outline-variant flex flex-col",o),children:[(0,s.jsx)(ap,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-primary",children:r}),(0,s.jsx)(av,{className:"font-serif text-title-lg text-surface-on",children:a})]}),(0,s.jsx)(W,{variant:n?"tonal":"outlined",size:"sm",leadingIcon:n?(0,s.jsx)(ao.A,{className:"w-4 h-4"}):(0,s.jsx)(eb.A,{className:"w-4 h-4"}),onClick:i,disabled:n,"aria-label":n?"Added ".concat(a," to your strategies"):"Add ".concat(a," to your strategies"),children:n?"Added":"Add"})]})}),(0,s.jsx)(aj,{className:"text-body-md text-surface-on-variant flex-grow",children:l})]})},aR=e=>{let{onNavigateToView:t,onAddCopingMechanism:a,userCopingMechanisms:r}=e,n=e=>r.some(t=>t.id===e);return(0,s.jsxs)("div",{className:"space-y-10 animate-in fade-in-0 duration-750 max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(Q.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"Resources"})]}),(0,s.jsx)("p",{className:"text-body-lg text-surface-on-variant",children:"Explore these guides to better understand the concepts behind the tools in this app and find support when you need it."}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on",children:"Mindfulness & Coping Techniques"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:[(0,s.jsxs)(a_,{id:"rain-exercise",title:"RAIN Mindfulness Exercise",icon:(0,s.jsx)(aA.A,{className:"w-6 h-6"}),isAdded:n("rain-exercise"),onAdd:()=>a(aE[0]),children:[(0,s.jsx)("p",{className:"mb-4 text-sm",children:"Mindfulness is a state of nonjudgmental awareness of what’s happening in the present moment. RAIN is a mindfulness practice that will help you focus on the present and cope with uncomfortable thoughts and emotions."}),(0,s.jsxs)("div",{className:"mb-4 p-3 bg-surface rounded-lg border border-outline-variant",children:[(0,s.jsx)("h5",{className:"font-semibold text-primary",children:"Prepare"}),(0,s.jsx)("p",{className:"text-sm",children:"Sit or lie down in a comfortable position. Close your eyes or let your gaze soften. Take three slow, deep breaths."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"font-bold text-4xl text-primary",children:"R"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-surface-on",children:"Recognize"}),(0,s.jsx)("p",{className:"text-sm",children:"Let yourself feel at ease in the present moment. Slowly take in your surroundings. Recognize your thoughts, feelings, and physical sensations. Name your feelings out loud or silently to yourself."})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"font-bold text-4xl text-primary",children:"A"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-surface-on",children:"Allow"}),(0,s.jsx)("p",{className:"text-sm",children:'Observe your experience as if watching a movie. Let your thoughts, feelings, and sensations come and go as they are. Let go of any judgment—it is okay to feel however you are feeling. You may tell yourself, "This is how it is right now."'})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"font-bold text-4xl text-primary",children:"I"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-surface-on",children:"Investigate"}),(0,s.jsx)("p",{className:"text-sm",children:"What words are going through your mind? What emotions are you feeling, and where are they coming from? How are these feelings experienced in your body? Sense the most vulnerable part of yourself and reflect on what it needs, such as acceptance, forgiveness, love, or belonging."})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"font-bold text-4xl text-primary",children:"N"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-surface-on",children:"Nurture"}),(0,s.jsx)("p",{className:"text-sm",children:'Be kind toward your experience. Give yourself a comforting message, such as "I love you," "you are okay," or anything else you need. Think of a friend, family member, pet, or spiritual figure, and imagine their love flowing to you. Let in healing and compassion until you feel calm and centered.'})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-surface rounded-lg border border-outline-variant",children:[(0,s.jsx)("h5",{className:"font-semibold text-primary",children:"Conclude"}),(0,s.jsx)("p",{className:"text-sm",children:"Take three slow, deep breaths. Continue to be mindful and kind to yourself throughout your day."})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)(a_,{id:"grounding-54321",title:"5-4-3-2-1 Grounding",icon:(0,s.jsx)(aI.A,{className:"w-6 h-6"}),isAdded:n("grounding-54321"),onAdd:()=>a(aE[1]),children:[(0,s.jsx)("p",{className:"mb-4",children:"Use your five senses to bring yourself back to the present moment."}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"5"})," things you can see."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"4"})," things you can feel."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"3"})," things you can hear."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"2"})," things you can smell."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"1"})," thing you can taste."]})]})]}),(0,s.jsxs)(a_,{id:"distress-accepts",title:"ACCEPTS Technique",icon:(0,s.jsx)(as.A,{className:"w-6 h-6"}),isAdded:n("distress-accepts"),onAdd:()=>a(aE[2]),children:[(0,s.jsx)("p",{className:"mb-4",children:"An acronym for distracting yourself from distressing emotions until they pass."}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"A"}),"ctivities"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"C"}),"ontributing"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"C"}),"omparisons"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"E"}),"motions"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"P"}),"ushing Away"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"T"}),"houghts"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"S"}),"ensations"]})]})]}),(0,s.jsxs)(a_,{id:"categories-exercise",title:"Categories",icon:(0,s.jsx)(aD.A,{className:"w-6 h-6"}),isAdded:n("categories-exercise"),onAdd:()=>a(aE[4]),children:[(0,s.jsx)("p",{className:"mb-4",children:"A simple distraction technique to shift your focus away from distressing thoughts."}),(0,s.jsxs)("ol",{className:"list-decimal pl-5 space-y-2 text-sm",children:[(0,s.jsx)("li",{children:"Pick a broad category (e.g., animals, countries, car models, fruits, breakfast cereals)."}),(0,s.jsx)("li",{children:"Mentally list as many items from that category as you can."}),(0,s.jsx)("li",{children:"Try to visualize each item as you name it."}),(0,s.jsx)("li",{children:"If you get stuck, simply choose a new category and begin again."})]})]})]}),(0,s.jsxs)(a_,{id:"urge-surfing",title:"Urge Surfing",icon:(0,s.jsx)(aT.A,{className:"w-6 h-6"}),isAdded:n("urge-surfing"),onAdd:()=>a(aE[3]),className:"md:col-span-2",children:[(0,s.jsx)("p",{className:"mb-4",children:"A technique for managing your unwanted behaviors. Rather than giving in to an urge, you will ride it out, like a surfer riding a wave. After a short time, the urge will pass on its own."}),(0,s.jsx)("h4",{className:"font-semibold text-surface-on mb-2",children:"How to Practice"}),(0,s.jsxs)("ol",{className:"list-decimal pl-5 space-y-2 text-sm mb-4",children:[(0,s.jsx)("li",{children:"Acknowledge you are having an urge."}),(0,s.jsxs)("li",{children:["Notice your thoughts and feelings without trying to change or suppress them.",(0,s.jsx)("em",{className:"block text-xs text-surface-on-variant/80 pl-2 border-l-2 border-outline ml-2 mt-1",children:"Note: It is normal to feel some discomfort during an urge."})]}),(0,s.jsxs)("li",{children:["Remind yourself...",(0,s.jsxs)("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[(0,s.jsx)("li",{children:"It's okay to have urges. They're natural reactions to addictions and habits."}),(0,s.jsx)("li",{children:"Some discomfort is okay. I don't have to change it."}),(0,s.jsx)("li",{children:'An urge is a feeling, not a "must." I can have this feeling and choose not to act.'}),(0,s.jsx)("li",{children:"An urge is temporary. Like any other feeling, it will pass on its own."})]})]})]}),(0,s.jsx)("h4",{className:"font-semibold text-surface-on mb-2",children:"Other Skills"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-medium text-surface-on",children:"Managing Triggers"}),(0,s.jsx)("p",{children:"Use coping skills to reduce the power of triggers. Know your triggers ahead of time, and have a strategy or skill prepared for each one."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-medium text-surface-on",children:"Delay & Distraction"}),(0,s.jsx)("p",{children:"Do something to take your mind off the urge. Every minute you delay increases the chance of the urge weakening on its own."})]})]}),(0,s.jsxs)("div",{className:"relative mt-4",children:[(0,s.jsx)("div",{className:"h-48 w-full rounded-lg bg-surface border border-outline-variant"}),(0,s.jsxs)("div",{className:"absolute inset-0 grid grid-cols-4 grid-rows-2 gap-x-2 p-2 sm:p-4 text-xs",children:[(0,s.jsxs)("div",{className:"col-start-1 row-start-2 p-2 bg-surface-container/80 rounded-lg text-center shadow-md",children:[(0,s.jsx)("p",{className:"font-bold text-primary",children:"Trigger"}),(0,s.jsx)("p",{className:"text-surface-on-variant text-[10px] leading-tight",children:"An urge is triggered by a person, place, thought, feeling, or something else."})]}),(0,s.jsxs)("div",{className:"col-start-2 row-start-1 p-2 bg-surface-container/80 rounded-lg text-center shadow-md",children:[(0,s.jsx)("p",{className:"font-bold text-primary",children:"Rise"}),(0,s.jsx)("p",{className:"text-surface-on-variant text-[10px] leading-tight",children:"The urge becomes more intense. This may happen gradually or very suddenly."})]}),(0,s.jsxs)("div",{className:"col-start-3 row-start-1 p-2 bg-surface-container/80 rounded-lg text-center shadow-md",children:[(0,s.jsx)("p",{className:"font-bold text-primary",children:"Peak"}),(0,s.jsx)("p",{className:"text-surface-on-variant text-[10px] leading-tight",children:"The urge reaches its most intense point. It may feel as if the urge will never go away."})]}),(0,s.jsxs)("div",{className:"col-start-4 row-start-2 p-2 bg-surface-container/80 rounded-lg text-center shadow-md",children:[(0,s.jsx)("p",{className:"font-bold text-primary",children:"Fall"}),(0,s.jsx)("p",{className:"text-surface-on-variant text-[10px] leading-tight",children:"The urge loses intensity and eventually fades away."})]})]})]})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-sm border-outline-variant",children:[(0,s.jsx)(ap,{children:(0,s.jsxs)(av,{className:"font-serif text-title-lg text-surface-on flex items-center gap-2",children:[(0,s.jsx)(aI.A,{})," The Wise Mind"]})}),(0,s.jsxs)(aj,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant",children:"Your mind has three states: The reasonable mind, the emotional mind, and the wise mind. Everyone possesses each of these states, but most people gravitate toward a specific one most of the time."}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-surface rounded-lg border-l-4 border-red-400",children:[(0,s.jsx)("h4",{className:"font-semibold text-surface-on",children:"Emotional Mind"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant mt-1",children:"Used when feelings control a person’s thoughts and behavior. They might act impulsively with little regard for consequences."})]}),(0,s.jsxs)("div",{className:"p-4 bg-surface rounded-lg border-l-4 border-purple-400",children:[(0,s.jsx)("h4",{className:"font-semibold text-surface-on",children:"Wise Mind"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant mt-1",children:"Refers to a balance between the reasonable and emotional halves. They are able to recognize and respect their feelings, while responding to them in a rational manner."})]}),(0,s.jsxs)("div",{className:"p-4 bg-surface rounded-lg border-l-4 border-blue-400",children:[(0,s.jsx)("h4",{className:"font-semibold text-surface-on",children:"Reasonable Mind"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant mt-1",children:"A person uses their Reasonable mind when they approach a situation intellectually. They plan and make decisions based on fact."})]})]})]})]})]}),(0,s.jsxs)("section",{className:"bg-surface-container-low p-6 sm:p-8 rounded-2xl shadow-lg",children:[(0,s.jsx)("h3",{className:"font-serif text-headline-sm text-surface-on mb-4",children:"Guides & Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(aM,{title:"Understanding CBT",description:"Learn about Cognitive Behavioral Therapy and how the Thought Record tool can help you challenge and reframe unhelpful thoughts.",icon:(0,s.jsx)(aI.A,{className:"w-7 h-7"}),view:"understanding-cbt",onNavigate:t}),(0,s.jsx)(aM,{title:"Crisis Support",description:"If you are in a crisis or need immediate support, please use these resources. You are not alone.",icon:(0,s.jsx)(tq.A,{className:"w-7 h-7 text-error"}),view:"crisis-support",onNavigate:t})]})]})]}),(0,s.jsx)("p",{className:"text-label-md text-center text-surface-on-variant pt-4",children:"The content in this app is for informational purposes only and is not a substitute for professional medical advice, diagnosis, or treatment."})]})};var az=a(6981);let aP=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(az.bL,{ref:t,className:(0,U.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(az.C1,{className:(0,U.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(ao.A,{className:"h-4 w-4"})})})});aP.displayName=az.bL.displayName;var aO=a(3350),aL=a(8830),aF=a(968);let aU=(0,tr.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),aB=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(aF.b,{ref:t,className:(0,U.cn)(aU(),a),...r})});aB.displayName=aF.b.displayName;let aW=[{name:"echo",label:"Echo",bgColor:"hsl(205 75% 45%)",textColor:"hsl(0 0% 100%)"},{name:"forest",label:"Forest",bgColor:"hsl(110 35% 45%)",textColor:"hsl(110 35% 98%)"},{name:"buttercup",label:"Buttercup",bgColor:"hsl(45 80% 60%)",textColor:"hsl(45 25% 15%)"},{name:"sunset",label:"Sunset",bgColor:"hsl(20 80% 45%)",textColor:"hsl(20 80% 98%)"}],aq=[{name:"Primary",colors:[{name:"Primary",var:"hsl(var(--primary))",text:"hsl(var(--primary-foreground))"},{name:"Primary Container",var:"hsl(var(--primary-container))",text:"hsl(var(--on-primary-container))"}]},{name:"Secondary",colors:[{name:"Secondary",var:"hsl(var(--secondary))",text:"hsl(var(--secondary-foreground))"},{name:"Secondary Container",var:"hsl(var(--secondary-container))",text:"hsl(var(--on-secondary-container))"}]},{name:"Tertiary",colors:[{name:"Tertiary",var:"hsl(var(--tertiary))",text:"hsl(var(--on-tertiary))"},{name:"Tertiary Container",var:"hsl(var(--tertiary-container))",text:"hsl(var(--on-tertiary-container))"}]},{name:"Surface",colors:[{name:"Background",var:"hsl(var(--background))",text:"hsl(var(--foreground))"},{name:"Surface",var:"hsl(var(--surface))",text:"hsl(var(--on-surface))"},{name:"Surface Variant",var:"hsl(var(--surface-variant))",text:"hsl(var(--on-surface-variant))"},{name:"Surface Container Low",var:"hsl(var(--surface-container-low))",text:"hsl(var(--on-surface))"},{name:"Surface Container",var:"hsl(var(--surface-container))",text:"hsl(var(--on-surface))"},{name:"Surface Container High",var:"hsl(var(--surface-container-high))",text:"hsl(var(--on-surface))"}]},{name:"Utility",colors:[{name:"Error Container",var:"hsl(var(--error-container))",text:"hsl(var(--on-error-container))"},{name:"Outline",var:"hsl(var(--outline))",text:"hsl(var(--background))",border:!0},{name:"Outline Variant",var:"hsl(var(--outline-variant))",text:"hsl(var(--background))",border:!0}]}],aY=[{name:"Display Large",class:"font-serif text-display-lg"},{name:"Display Medium",class:"font-serif text-display-md"},{name:"Display Small",class:"font-serif text-display-sm"},{name:"Headline Large",class:"font-serif text-headline-lg"},{name:"Headline Medium",class:"font-serif text-headline-md"},{name:"Headline Small",class:"font-serif text-headline-sm"},{name:"Title Large",class:"font-serif text-title-lg"},{name:"Title Medium",class:"font-serif text-title-md"},{name:"Title Small",class:"font-serif text-title-sm"},{name:"Body Large",class:"text-body-lg"},{name:"Body Medium",class:"text-body-md"},{name:"Body Small",class:"text-body-sm"},{name:"Label Large",class:"text-label-lg"},{name:"Label Medium",class:"text-label-md"},{name:"Label Small",class:"text-label-sm"}],aJ=e=>{let{currentPalette:t,onChangePalette:a}=e,[n,i]=r.useState([50]),[l,o]=r.useState(!1);return(0,s.jsxs)("div",{className:"space-y-12 animate-in fade-in-0 duration-750 max-w-5xl w-full",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(ac.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"Design System"})]}),(0,s.jsxs)("section",{"aria-labelledby":"colors-heading",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(al.A,{className:"w-7 h-7 text-secondary"}),(0,s.jsx)("h3",{id:"colors-heading",className:"font-serif text-headline-md text-surface-on",children:"Color Palette"})]}),(0,s.jsxs)("div",{className:"bg-surface-container-low p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("h4",{className:"text-title-md font-medium text-surface-on mb-3",children:"Live Theme Selector"}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:"Select a palette to see it applied to this page and the entire app instantly."}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:aW.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.name),style:{backgroundColor:e.bgColor,color:e.textColor},className:(0,U.cn)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium px-6 h-10 transition-all duration-200","hover:brightness-110 active:brightness-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",t===e.name&&"ring-2 ring-offset-2 ring-ring ring-offset-background"),"aria-pressed":t===e.name,children:[(0,s.jsx)("span",{children:e.label}),t===e.name&&(0,s.jsx)(ao.A,{className:"w-5 h-5"})]},e.name))})]}),aq.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on-variant mb-3",children:e.name}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:e.colors.map(e=>(0,s.jsxs)("div",{style:{backgroundColor:e.var,color:e.text,borderColor:e.border?"hsl(var(--outline))":"transparent"},className:"p-4 rounded-lg shadow-sm border",children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,s.jsx)("p",{className:"text-xs opacity-80",children:e.var})]},e.name))})]},e.name))]}),(0,s.jsxs)("section",{"aria-labelledby":"typography-heading",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(aO.A,{className:"w-7 h-7 text-secondary"}),(0,s.jsx)("h3",{id:"typography-heading",className:"font-serif text-headline-md text-surface-on",children:"Typography"})]}),(0,s.jsx)("div",{className:"bg-surface-container-low p-6 rounded-lg shadow-sm space-y-4",children:aY.map(e=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-x-6",children:[(0,s.jsx)("p",{className:"text-sm text-surface-on-variant w-40 shrink-0",children:e.name}),(0,s.jsx)("p",{className:(0,U.cn)("text-surface-on truncate",e.class),children:"The five boxing wizards jump quickly."})]},e.name))})]}),(0,s.jsxs)("section",{"aria-labelledby":"components-heading",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(aL.A,{className:"w-7 h-7 text-secondary"}),(0,s.jsx)("h3",{id:"components-heading",className:"font-serif text-headline-md text-surface-on",children:"Components"})]}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on-variant mb-3",children:"Action Buttons"}),(0,s.jsxs)("div",{className:"bg-surface-container-low p-6 rounded-lg shadow-sm flex flex-wrap items-center justify-center gap-4",children:[(0,s.jsx)(W,{variant:"filled",children:"Filled Button"}),(0,s.jsx)(W,{variant:"tonal",children:"Tonal Button"}),(0,s.jsx)(W,{variant:"outlined",children:"Outlined Button"}),(0,s.jsx)(W,{variant:"text",children:"Text Button"}),(0,s.jsx)(W,{variant:"elevated",children:"Elevated Button"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-serif text-title-lg text-surface-on-variant mb-3",children:"Inputs & Controls"}),(0,s.jsxs)("div",{className:"bg-surface-container-low p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(aB,{htmlFor:"ds-input",children:"Text Input"}),(0,s.jsx)(eN,{id:"ds-input",type:"text",placeholder:"Type something...",className:"mt-1"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(aP,{id:"ds-checkbox",checked:l,onCheckedChange:e=>o(!!e)}),(0,s.jsx)(aB,{htmlFor:"ds-checkbox",children:"Checkbox"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)(aB,{htmlFor:"ds-slider",children:"Slider"}),(0,s.jsx)(eQ,{id:"ds-slider",value:[n[0]],onValueChange:i,max:100,step:1,className:"mt-2"})]})]})]})]})]})]})},aH=r.memo(e=>{let{currentTheme:t,onToggleTheme:a}=e,[n,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{i(!0)},[]),n)?(0,s.jsx)("div",{className:"fixed bottom-6 right-6 z-40",children:(0,s.jsx)("button",{onClick:a,className:(0,U.cn)("theme-toggle-button-3d","rounded-full w-12 h-12","inline-flex items-center justify-center","relative overflow-hidden"),"aria-label":"light"===t?"Switch to dark theme":"Switch to light theme",children:(0,s.jsx)(ej.N,{initial:!1,mode:"wait",children:(0,s.jsx)(ey.P.div,{initial:{y:-20,opacity:0,rotate:-90},animate:{y:0,opacity:1,rotate:0},exit:{y:20,opacity:0,rotate:90},transition:{duration:.3},className:"absolute",children:"light"===t?(0,s.jsx)(ei.A,{className:"h-[1.5rem] w-[1.5rem] fill-current"}):(0,s.jsx)(en.A,{className:"h-[1.5rem] w-[1.5rem] fill-current"})},t)})})}):(0,s.jsx)("div",{className:"fixed bottom-6 right-6 z-40 w-12 h-12 rounded-full bg-surface-container"})});var aV=a(4371),aG=a(7250);let aK=aG.bL,aX=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(aG.q7,{ref:t,className:(0,U.cn)("border-b",a),...r})});aX.displayName="AccordionItem";let aZ=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(aG.Y9,{className:"flex",children:(0,s.jsxs)(aG.l9,{ref:t,className:(0,U.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...n,children:[r,(0,s.jsx)(ae.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});aZ.displayName=aG.l9.displayName;let a$=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(aG.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,s.jsx)("div",{className:(0,U.cn)("pb-4 pt-0",a),children:r})})});a$.displayName=aG.UC.displayName;let aQ=e=>{let{onNavigateBack:t}=e;return(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in-0 duration-750 max-w-3xl w-full",children:[(0,s.jsx)(W,{onClick:t,variant:"text",size:"sm",leadingIcon:(0,s.jsx)(eX.A,{}),className:"mb-4",children:"Back to Resources"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(aI.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h2",{className:"font-serif text-headline-lg text-surface-on",children:"Understanding CBT"})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-sm border-outline-variant",children:[(0,s.jsx)(ap,{children:(0,s.jsx)(av,{className:"font-serif text-title-lg text-surface-on",children:"The Cognitive Model"})}),(0,s.jsxs)(aj,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant",children:"Cognitive behavioral therapy (usually referred to as “CBT”) is based upon the idea that how you think determines how you feel and how you behave."}),(0,s.jsx)("div",{className:"text-center font-semibold text-lg text-surface-on",children:"Thoughts → Emotions → Behaviors"}),(0,s.jsxs)("div",{className:"space-y-2 text-body-md text-surface-on-variant",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"1. Something happens."})," It could be anything."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"2. You have thoughts"})," about what has just occurred."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"3. You experience emotions"})," based upon your thoughts."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"4. You respond"})," to your thoughts and feelings with behaviors."]})]}),(0,s.jsxs)("div",{className:"bg-surface p-4 rounded-lg border border-outline-variant",children:[(0,s.jsx)("h4",{className:"font-semibold text-surface-on mb-2",children:"Example:"}),(0,s.jsxs)("p",{className:"text-surface-on-variant",children:[(0,s.jsx)("strong",{children:"Situation:"})," A stranger scowls at you while passing you on the street."]}),(0,s.jsxs)("p",{className:"text-surface-on-variant",children:[(0,s.jsx)("strong",{children:"You think:"})," “I must’ve done something wrong… I’m so awkward.”"]}),(0,s.jsxs)("p",{className:"text-surface-on-variant",children:[(0,s.jsx)("strong",{children:"You feel:"})," Embarrassed and upset with yourself."]}),(0,s.jsxs)("p",{className:"text-surface-on-variant",children:[(0,s.jsx)("strong",{children:"Your behavior:"})," You apologize to the stranger and replay the situation over and over in your head."]})]}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant",children:"The stranger could’ve been scowling for any number of reasons. Unfortunately, irrational or not, these thoughts still affect how we feel, and how we behave. Consider a different response:"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-surface p-4 rounded-lg",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Thought:"})," “What a jerk!”"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Emotion:"})," Angry"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Behavior:"})," Shouts: “What’s your problem?!”"]})]}),(0,s.jsxs)("div",{className:"bg-surface p-4 rounded-lg",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Thought:"})," “He must be having a bad day…”"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Emotion:"})," Neutral"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Behavior:"})," Walks away and forgets the incident."]})]})]}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant !mt-6",children:"Using the cognitive model, you will learn to identify your own patterns of thoughts, emotions, and behaviors. Once you become aware of your own irrational thoughts, you will learn to change them."})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-sm border-outline-variant",children:[(0,s.jsx)(ap,{children:(0,s.jsx)(av,{className:"font-serif text-title-lg text-surface-on",children:"Thinking Errors"})}),(0,s.jsxs)(aj,{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"p-3 bg-surface rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-primary",children:"Ignoring the Good"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant",children:"You pay more attention to bad things, and ignore when something good happens."})]}),(0,s.jsxs)("div",{className:"p-3 bg-surface rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-primary",children:"Blowing Things Up"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant",children:"Making a really big deal out of something small, or making something a little bit bad seem like the worst thing ever."})]}),(0,s.jsxs)("div",{className:"p-3 bg-surface rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-primary",children:"Fortune Telling"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant",children:"Thinking you know what will happen in the future, and that it will be bad."})]})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-sm border-outline-variant",children:[(0,s.jsx)(ap,{children:(0,s.jsx)(av,{className:"font-serif text-title-lg text-surface-on",children:"Core Beliefs"})}),(0,s.jsxs)(aj,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant",children:"Core beliefs are the deeply held beliefs that influence how we interpret our experiences. Think of core beliefs like a pair of sunglasses. Everyone has a different “shade” that causes them to see things differently."}),(0,s.jsxs)("div",{className:"my-4 flex flex-col md:flex-row items-center justify-center gap-2 text-center",children:[(0,s.jsx)("div",{className:"p-3 bg-surface rounded-lg",children:(0,s.jsx)("strong",{children:"Situation"})}),(0,s.jsx)("div",{className:"text-primary font-bold text-2xl",children:"→"}),(0,s.jsx)("div",{className:"p-3 bg-surface rounded-lg",children:(0,s.jsx)("strong",{children:"Core Belief"})}),(0,s.jsx)("div",{className:"text-primary font-bold text-2xl",children:"→"}),(0,s.jsx)("div",{className:"p-3 bg-surface rounded-lg",children:(0,s.jsx)("strong",{children:"Consequence"})})]}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant",children:"Many people have negative core beliefs that cause harmful consequences. To begin challenging them, you first need to identify them. Here are some common examples:"}),(0,s.jsx)("div",{className:"columns-2 sm:columns-3 gap-4 text-sm text-surface-on-variant bg-surface p-4 rounded-lg",children:(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,s.jsx)("li",{children:"I’m unlovable"}),(0,s.jsx)("li",{children:"I’m Stupid"}),(0,s.jsx)("li",{children:"I’m boring"}),(0,s.jsx)("li",{children:"I’m not good enough"}),(0,s.jsx)("li",{children:"I’m ugly"}),(0,s.jsx)("li",{children:"I’m worthless"}),(0,s.jsx)("li",{children:"I’m a bad person"}),(0,s.jsx)("li",{children:"I’m abnormal"}),(0,s.jsx)("li",{children:"I’m undeserving"})]})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-surface-on",children:"What is one of your negative beliefs?"}),(0,s.jsx)("p",{className:"text-sm text-surface-on-variant mb-2",children:"List three pieces of evidence contrary to your negative core belief:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-1 pl-5",children:[(0,s.jsx)("li",{children:"__________________________________"}),(0,s.jsx)("li",{children:"__________________________________"}),(0,s.jsx)("li",{children:"__________________________________"})]})]})]})]}),(0,s.jsxs)(ag,{className:"bg-surface-container-low shadow-sm border-outline-variant",children:[(0,s.jsx)(ap,{children:(0,s.jsx)(av,{className:"font-serif text-title-lg text-surface-on",children:"DEAR MAN: Effective Communication"})}),(0,s.jsxs)(aj,{children:[(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mb-4",children:"The acronym DEAR MAN outlines a strategy for communicating effectively to express your wants and needs respectfully."}),(0,s.jsxs)(aK,{type:"single",collapsible:!0,className:"w-full space-y-2",children:[(0,s.jsxs)(aX,{value:"d",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"D - Describe"}),(0,s.jsxs)(a$,{className:"px-4 pb-4",children:["Clearly and concisely describe the facts of the situation, without any judgment. ",(0,s.jsx)("br",{}),(0,s.jsx)("em",{children:"e.g., “You have asked me to work late 3 days this week.”"})]})]}),(0,s.jsxs)(aX,{value:"e",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"E - Express"}),(0,s.jsxs)(a$,{className:"px-4 pb-4",children:["Use “I” statements to express your emotions. ",(0,s.jsx)("br",{}),(0,s.jsx)("em",{children:"e.g., “I feel overwhelmed by the extra work I’ve been given.”"})]})]}),(0,s.jsxs)(aX,{value:"a1",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"A - Assert"}),(0,s.jsxs)(a$,{className:"px-4 pb-4",children:["Clearly state what you want or need. Be specific. ",(0,s.jsx)("br",{}),(0,s.jsx)("em",{children:"e.g., “I need to resume my regular 40-hour work week.”"})]})]}),(0,s.jsxs)(aX,{value:"r",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"R - Reinforce"}),(0,s.jsx)(a$,{className:"px-4 pb-4",children:"Reward the other person if they respond well to you. Smiling, saying “thank you”, and other kind gestures work well."})]}),(0,s.jsxs)(aX,{value:"m",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"M - Mindfulness"}),(0,s.jsxs)(a$,{className:"px-4 pb-4",children:["Being mindful of your goal means not getting sidetracked by other issues. ",(0,s.jsx)("br",{}),(0,s.jsx)("em",{children:"e.g., “I would like to resolve the overtime issue before talking about the upcoming project.”"})]})]}),(0,s.jsxs)(aX,{value:"a2",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"A - Appear confident"}),(0,s.jsx)(a$,{className:"px-4 pb-4",children:"Use body language to show confidence, even if you don’t feel it. Stand up straight, make appropriate eye contact, and speak clearly."})]}),(0,s.jsxs)(aX,{value:"n",className:"bg-surface rounded-lg",children:[(0,s.jsx)(aZ,{className:"p-4 text-left font-semibold text-primary",children:"N - Negotiate"}),(0,s.jsxs)(a$,{className:"px-4 pb-4",children:["Know the limits of what you are willing to accept, but be willing to compromise within them. ",(0,s.jsx)("br",{}),(0,s.jsx)("em",{children:"e.g., “I’ll finish the extra work this week, but I won’t be able to manage the same amount of work next week.”"})]})]})]})]})]})]})};var a0=a(1554),a1=a(1840);let a2=e=>{let{onNavigateBack:t}=e;return(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in-0 duration-750 max-w-3xl w-full",children:[(0,s.jsx)(W,{onClick:t,variant:"text",size:"sm",leadingIcon:(0,s.jsx)(eX.A,{}),className:"mb-4",children:"Back to Resources"}),(0,s.jsxs)("div",{className:"bg-error-container/40 p-6 sm:p-8 rounded-2xl shadow-lg",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-4",children:[(0,s.jsx)(tq.A,{className:"w-10 h-10 sm:w-12 sm:h-12 text-error flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-serif text-headline-md sm:text-headline-lg text-on-error-container",children:"Immediate Support"}),(0,s.jsx)("p",{className:"text-body-lg text-on-error-container/80 mt-1",children:"If you are in a crisis or any other person may be in danger, please use these resources."})]})]}),(0,s.jsxs)("div",{className:"space-y-4 text-left",children:[(0,s.jsxs)("a",{href:"tel:988",className:"block w-full text-left p-4 bg-surface rounded-lg hover:bg-surface-container transition-colors",children:[(0,s.jsxs)("h3",{className:"font-bold text-title-lg text-surface-on flex items-center gap-2",children:[(0,s.jsx)(a0.A,{className:"w-5 h-5"})," Call or Text 988"]}),(0,s.jsx)("p",{className:"text-surface-on-variant",children:"The 988 Suicide & Crisis Lifeline provides 24/7, free, and confidential support."})]}),(0,s.jsxs)("a",{href:"https://www.crisistextline.org/",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left p-4 bg-surface rounded-lg hover:bg-surface-container transition-colors",children:[(0,s.jsxs)("h3",{className:"font-bold text-title-lg text-surface-on flex items-center gap-2",children:["Crisis Text Line ",(0,s.jsx)(a1.A,{className:"w-4 h-4"})]}),(0,s.jsx)("p",{className:"text-surface-on-variant",children:"Text HOME to 741741 from anywhere in the US, anytime, about any type of crisis."})]}),(0,s.jsxs)("a",{href:"tel:911",className:"block w-full text-left p-4 bg-surface rounded-lg hover:bg-surface-container transition-colors",children:[(0,s.jsxs)("h3",{className:"font-bold text-title-lg text-surface-on flex items-center gap-2",children:[(0,s.jsx)(a0.A,{className:"w-5 h-5"})," Call 911"]}),(0,s.jsx)("p",{className:"text-surface-on-variant",children:"For any immediate life-threatening emergency, please call 911."})]})]}),(0,s.jsx)("p",{className:"text-label-md text-on-error-container/80 text-center mt-8",children:"Your safety is important. This application is a tool for self-reflection and is not a substitute for professional medical advice, diagnosis, or treatment."})]})]})},a4=e=>{let{onOnboardingComplete:t}=e,[a,n]=(0,r.useState)(0),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),u=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},h=e=>{m(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},x=()=>{(1!==a||i.trim())&&n(e=>e+1)},f=()=>{t({name:i.trim(),strengths:o,copingMechanisms:d,dashboardWidgets:{planner:!0,medication:!0,copingMechanisms:!0}})};return(0,s.jsx)("div",{className:"min-h-screen bg-surface flex items-center justify-center p-4",children:(0,s.jsx)(ej.N,{mode:"wait",children:(()=>{switch(a){case 0:return(0,s.jsxs)(ey.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,s.jsx)(F.A,{className:"w-24 h-24 text-primary mx-auto mb-6"}),(0,s.jsx)("h1",{className:"font-serif text-display-md text-surface-on",children:"Welcome to Echo"}),(0,s.jsx)("p",{className:"text-body-lg text-surface-on-variant mt-4 max-w-xl mx-auto",children:"A calm, introspective space to organize your thoughts, track your well-being, and reflect on your daily life."}),(0,s.jsx)(W,{onClick:x,size:"lg",className:"mt-10",trailingIcon:(0,s.jsx)(eZ.A,{}),children:"Get Started"})]},0);case 1:return(0,s.jsxs)(ey.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center w-full max-w-md",children:[(0,s.jsx)("h1",{className:"font-serif text-headline-lg text-surface-on",children:"What should we call you?"}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Enter your name",className:"mt-8 w-full p-4 bg-surface-container border border-outline-variant hover:border-outline focus:border-primary focus:ring-1 focus:ring-primary rounded-xl text-surface-on placeholder-surface-on-variant text-center text-xl",autoFocus:!0,onKeyPress:e=>"Enter"===e.key&&x()}),(0,s.jsx)(W,{onClick:x,size:"lg",className:"mt-8",disabled:!i.trim(),children:"Next"})]},1);case 2:return(0,s.jsxs)(ey.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center w-full max-w-3xl",children:[(0,s.jsxs)("h1",{className:"font-serif text-headline-lg text-surface-on",children:["Let's celebrate your strengths, ",i,"."]}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mt-2 mb-8",children:"What are some of your best qualities? Select a few that resonate with you."}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:ah.map(e=>{let t=o.includes(e);return(0,s.jsx)("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border-2 ".concat(t?"bg-primary border-primary text-primary-foreground":"bg-surface-container border-outline-variant hover:border-outline text-surface-on-variant"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e,t&&(0,s.jsx)(ao.A,{className:"w-4 h-4"})]})},e)})}),(0,s.jsx)(W,{onClick:x,size:"lg",className:"mt-10",children:"Continue"})]},2);case 3:return(0,s.jsxs)(ey.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center w-full max-w-3xl",children:[(0,s.jsx)("h1",{className:"font-serif text-headline-lg text-surface-on",children:"Select a few starting coping strategies."}),(0,s.jsx)("p",{className:"text-body-md text-surface-on-variant mt-2 mb-8",children:"You can always change these later in your profile."}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:aE.map(e=>{let t=d.some(t=>t.id===e.id);return(0,s.jsx)("button",{onClick:()=>h(e),className:"p-4 rounded-lg text-left transition-all duration-200 border-2 ".concat(t?"bg-primary-container border-primary":"bg-surface-container border-outline-variant hover:border-outline"),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium ".concat(t?"text-on-primary-container":"text-surface-on"),children:e.text}),t&&(0,s.jsx)(ao.A,{className:"w-5 h-5 ".concat(t?"text-primary":"text-transparent")})]})},e.id)})}),(0,s.jsx)(W,{onClick:x,size:"lg",className:"mt-8",children:"Continue"})]},3);case 4:return(0,s.jsxs)(ey.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(ao.A,{className:"w-16 h-16 text-green-500"})}),(0,s.jsxs)("h1",{className:"font-serif text-display-sm text-surface-on",children:["You're all set, ",i,"!"]}),(0,s.jsx)("p",{className:"text-body-lg text-surface-on-variant mt-4",children:"Your personal wellness dashboard is ready."}),(0,s.jsx)(W,{onClick:f,size:"lg",className:"mt-10",children:"Enter Echo"})]},4);default:return null}})()})})},a5=()=>{let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,l]=(0,r.useState)({}),[o,c]=(0,r.useState)({}),[d,u]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[f,O]=(0,r.useState)([]),[L,F]=(0,r.useState)([]),[B,q]=(0,r.useState)(null),[Y,J]=(0,r.useState)(null),{toast:V}=(0,ew.dj)(),[G,K]=(0,r.useState)(null),[X,Z]=(0,r.useState)(null),[$,Q]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[ea,er]=(0,r.useState)("dashboard"),[en,ei]=(0,r.useState)(null),[el,eo]=(0,r.useState)(null),[ec,ed]=(0,r.useState)(!1),[em,eu]=(0,r.useState)(!1),eh=["dashboard","journal","journal-new","journal-edit","thoughtRecord","thoughtRecord-new","thoughtRecord-edit","planner","medication","affirmations","profile","resources","designSystem","understanding-cbt","crisis-support"],ex=e=>eh.includes(e),ef=(0,r.useCallback)(()=>ed(!1),[]),eg=(0,r.useCallback)(e=>{window.location.hash=e},[]);(0,r.useEffect)(()=>{let e=()=>{let e=window.location.hash.substring(1);er(ex(e)?e:"dashboard"),ef()};return e(),ex(window.location.hash.substring(1))||window.history.replaceState(null,"","".concat(window.location.pathname,"#dashboard")),window.addEventListener("hashchange",e,!1),()=>{window.removeEventListener("hashchange",e,!1)}},[ef]),(0,r.useEffect)(()=>{ei(localStorage.getItem(m)||"light"),eo(P()),t(p().sort((e,t)=>t.timestamp-e.timestamp)),n(j().sort((e,t)=>t.timestamp-e.timestamp)),q(R()),F(M()),u(S()),O(T()),x(I()),l(N()),c(k()),eu(!0)},[]),(0,r.useEffect)(()=>{if(null===en||null===el||!em)return;let e=document.documentElement;e.classList.remove("theme-echo","theme-forest","theme-buttercup","theme-sunset"),e.classList.add("theme-".concat(el)),e.classList.toggle("dark","dark"===en),localStorage.setItem(m,en),z(el)},[en,el,em]),(0,r.useEffect)(()=>{em&&g(e)},[e,em]),(0,r.useEffect)(()=>{em&&b(a)},[a,em]),(0,r.useEffect)(()=>{em&&y(i)},[i,em]),(0,r.useEffect)(()=>{em&&w(o)},[o,em]),(0,r.useEffect)(()=>{em&&C(d)},[d,em]),(0,r.useEffect)(()=>{em&&A(h)},[h,em]),(0,r.useEffect)(()=>{em&&D(f)},[f,em]),(0,r.useEffect)(()=>{em&&E(L)},[L,em]),(0,r.useEffect)(()=>{em&&B&&_(B)},[B,em]);let ev=(0,r.useCallback)(()=>{ei(e=>"light"===e?"dark":"light")},[]),ej=(0,r.useCallback)(e=>{eo(e)},[]),ey=(0,r.useCallback)(()=>{Z(null),eg("journal")},[eg]),eN=(0,r.useCallback)(()=>{Q(null),eg("thoughtRecord")},[eg]),ek=(0,r.useCallback)(()=>{Z(null),eg("journal-new")},[eg]),eC=(0,r.useCallback)(e=>{Z(e),eg("journal-edit")},[eg]),eA=(0,r.useCallback)(e=>{let a=Date.now();if(X){let a={...X,title:e.title,text:e.text,audioBase64DataUrl:e.audioBase64DataUrl};t(e=>e.map(e=>e.id===X.id?a:e))}else{let s={id:a.toString(),timestamp:a,title:e.title,text:e.text,audioBase64DataUrl:e.audioBase64DataUrl};t(e=>[s,...e].sort((e,t)=>t.timestamp-e.timestamp))}ey()},[X,ey]),eI=(0,r.useCallback)(e=>{K(e)},[]),eD=(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),eT=(0,r.useCallback)(()=>{Q(null),eg("thoughtRecord-new")},[eg]),eE=(0,r.useCallback)(e=>{Q(e),eg("thoughtRecord-edit")},[eg]),e_=(0,r.useCallback)((e,t)=>{let a=Date.now(),s="Thought Record - ".concat(new Date(a).toLocaleDateString());if(e)n(a=>a.map(a=>a.id===e?{...a,data:t,title:s}:a));else{let e={id:a.toString(),timestamp:a,title:s,data:t};n(t=>[e,...t].sort((e,t)=>t.timestamp-e.timestamp))}eN()},[eN]),eR=(0,r.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),ez=()=>v(e),eP=e=>q(e),eL=(0,r.useCallback)(e=>{B&&q(t=>t?t.copingMechanisms.some(t=>t.id===e.id)?(V({title:"Strategy already added"}),t):(V({title:"Strategy added to your profile!"}),{...t,copingMechanisms:[...t.copingMechanisms,e]}):null)},[B,V]),eF=(0,r.useCallback)(e=>i[e],[i]),eU=(0,r.useCallback)(e=>{em&&l(t=>({...t,[e.date]:e}))},[em]),eB=(0,r.useCallback)(e=>o[e],[o]),eW=(0,r.useCallback)(e=>{em&&c(t=>({...t,[e.weekStartDate]:e}))},[em]),eq=(0,r.useCallback)(e=>{let t={...e,id:Date.now().toString(),addedTimestamp:Date.now(),frequency:e.frequency.trim()||"As needed"};u(e=>[t,...e].sort((e,t)=>t.addedTimestamp-e.addedTimestamp))},[]),eY=(0,r.useCallback)(e=>{u(t=>t.map(t=>t.id===e.id?{...e,frequency:e.frequency.trim()||"As needed"}:t).sort((e,t)=>t.addedTimestamp-e.timestamp))},[]),eJ=(0,r.useCallback)(e=>{u(t=>t.filter(t=>t.id!==e)),O(t=>t.map(t=>({...t,medicationIds:t.medicationIds.filter(t=>t!==e)})))},[]),eV=(0,r.useCallback)(e=>{let t={id:Date.now().toString(),medicationId:e.id,medicationName:e.name,dosage:e.dosage,timestamp:Date.now()};x(e=>[t,...e])},[]),eK=(0,r.useCallback)(()=>{x([])},[]),eX=(0,r.useCallback)((e,t)=>{let a={id:Date.now().toString(),name:e,medicationIds:t};O(e=>[a,...e])},[]),eZ=(0,r.useCallback)(e=>{O(t=>t.map(t=>t.id===e.id?e:t))},[]),e$=(0,r.useCallback)(e=>{O(t=>t.filter(t=>t.id!==e))},[]),eQ=(0,r.useCallback)(e=>{let t=f.find(t=>t.id===e);if(!t)return;let a=t.medicationIds.map(e=>{let t=d.find(t=>t.id===e);return t?{id:"".concat(Date.now(),"-").concat(t.id),medicationId:t.id,medicationName:t.name,dosage:t.dosage,timestamp:Date.now()}:null}).filter(e=>null!==e);a.length>0&&x(e=>[...a,...e])},[f,d]),e0=(0,r.useCallback)(e=>{let t={...e,id:Date.now().toString()};F(e=>[...e,t])},[]),e1=(0,r.useCallback)(e=>{F(t=>t.map(t=>t.id===e.id?e:t))},[]),e2=(0,r.useCallback)(e=>{F(t=>t.filter(t=>t.id!==e))},[]),e4=(0,r.useCallback)(()=>{t([]),n([])},[]),e5=(0,r.useCallback)(()=>{l({}),c({})},[]),e3=(0,r.useCallback)(()=>{u([]),x([]),O([])},[]),e6=(0,r.useCallback)(()=>{t([]),n([]),l({}),c({}),u([]),x([]),O([]),F([]),q({name:"",strengths:[],copingMechanisms:[],dashboardWidgets:{},favoriteAffirmations:[]})},[]),e8=(0,r.useCallback)(e=>{let a=e.split("\n").map(e=>"<p>".concat(e.trim()||"&nbsp;","</p>")).join(""),s=Date.now(),r={id:s.toString(),timestamp:s,title:"My Plan",text:a};t(e=>[r,...e].sort((e,t)=>t.timestamp-e.timestamp))},[]);if(!em||!el||!en||null===B)return(0,s.jsx)("div",{className:"min-h-screen flex flex-col bg-background",children:(0,s.jsxs)("div",{className:"flex flex-col flex-grow items-center justify-center",children:[(0,s.jsx)(ep,{className:"h-24 w-24 rounded-full mb-6"}),(0,s.jsx)(ep,{className:"h-10 w-64 mb-4"}),(0,s.jsx)(ep,{className:"h-6 w-96"})]})});if(!B.name)return(0,s.jsx)(a4,{onOnboardingComplete:e=>{q(e)}});let e7=ea.endsWith("-new")||ea.endsWith("-edit");return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-surface text-surface-on selection:bg-primary-container selection:text-on-primary-container",children:[(0,s.jsx)(H,{onToggleDrawer:()=>ed(e=>!e),onNavigateToView:eg,currentView:ea}),(0,s.jsx)(es,{isOpen:ec,onClose:ef,onNavigateToView:eg,currentView:ea}),(0,s.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,s.jsxs)("main",{className:(0,U.cn)("flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12",e7&&"h-full py-0 px-0 sm:px-0 lg:px-0"),children:[Y&&(0,s.jsxs)("div",{className:"bg-error-container text-on-error-container p-4 rounded-xl relative mb-6 shadow-md flex items-start",role:"alert",children:[(0,s.jsx)("svg",{className:"fill-current h-5 w-5 text-on-error-container mr-3 mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 5v6h2V5H9zm0 8v2h2v-2H9z"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"font-bold text-title-md",children:"Error"}),(0,s.jsx)("p",{className:"text-body-md",children:Y})]}),(0,s.jsx)("button",{onClick:()=>J(null),className:"absolute top-3 right-3 text-on-error-container hover:text-on-error-container/80 p-1 rounded-full hover:bg-black/10","aria-label":"Close error message",children:(0,s.jsx)(aV.A,{className:"w-6 w-6"})})]}),(()=>{switch(ea){case"dashboard":return(0,s.jsx)(eS,{dailyPlans:i,medications:d,medicationGroups:f,profileData:B,onUpdateProfile:eP,onNavigateToView:eg});case"journal":return(0,s.jsx)("div",{className:"relative flex justify-center",children:(0,s.jsx)(eO,{entries:e,onViewEntry:eI,onEdit:eC,onDelete:eD})});case"journal-new":case"journal-edit":return(0,s.jsx)(eM,{onSave:eA,onClose:ey,initialEntry:X});case"thoughtRecord":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(eG,{thoughtRecords:a,onNew:eT,onView:et,onEdit:eE,onDelete:eR})});case"thoughtRecord-new":case"thoughtRecord-edit":return(0,s.jsx)("div",{className:"flex justify-center h-full",children:(0,s.jsx)("div",{className:"max-w-3xl w-full",children:(0,s.jsx)(td,{initialData:$,onSave:e_,onClose:eN,isActive:!0})})});case"planner":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(t2,{getDailyPlan:eF,saveDailyPlan:eU,getWeeklyPlan:eB,saveWeeklyPlan:eW,onSavePlanToJournal:e8,events:L,journalEntries:e,thoughtRecords:a,onAddEvent:e0,onUpdateEvent:e1,onDeleteEvent:e2,onViewJournalEntry:eI,onViewThoughtRecord:et})});case"medication":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(aa,{medications:d,medicationLogs:h,medicationGroups:f,onAddMedication:eq,onUpdateMedication:eY,onDeleteMedication:eJ,onLogMedicationIntake:eV,onClearMedicationLog:eK,onAddMedicationGroup:eX,onUpdateMedicationGroup:eZ,onDeleteMedicationGroup:e$,onLogMedicationBundle:eQ})});case"affirmations":return(0,s.jsx)(ai,{profileData:B,onUpdateProfile:eP});case"profile":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(aS,{profileData:B,onUpdateProfile:eP,currentTheme:en,currentPalette:el,onToggleTheme:ev,onChangePalette:ej,onDownloadJournal:ez,onClearJournal:e4,onClearPlanner:e5,onClearMedication:e3,onClearAllData:e6,onNavigateToView:eg,onReOnboard:()=>q({...B,name:""})})});case"resources":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(aR,{onNavigateToView:eg,onAddCopingMechanism:eL,userCopingMechanisms:B.copingMechanisms})});case"understanding-cbt":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(aQ,{onNavigateBack:()=>eg("resources")})});case"crisis-support":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(a2,{onNavigateBack:()=>eg("resources")})});case"designSystem":return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(aJ,{currentPalette:el,onChangePalette:ej})});default:return null}})()]}),!e7&&(0,s.jsx)("footer",{className:"text-center py-8 text-label-md text-surface-on-variant"})]}),"journal"===ea&&(0,s.jsx)("div",{className:"fixed bottom-6 w-full flex justify-center z-20 md:w-auto md:left-1/2 md:right-auto md:transform md:-translate-x-1/2",children:(0,s.jsx)(W,{onClick:ek,variant:"filled",size:"lg",className:"h-16 w-16 !rounded-full shadow-xl","aria-label":"New Journal Entry",isIconOnly:!0,leadingIcon:(0,s.jsx)(eb.A,{className:"w-8 h-8"})})}),(0,s.jsx)(aH,{currentTheme:en,onToggleTheme:ev}),(0,s.jsx)(eH,{isOpen:!!G,onClose:()=>K(null),entry:G,onEdit:eC}),(0,s.jsx)(tu,{isOpen:!!ee,onClose:()=>et(null),record:ee,onEdit:e=>{et(null),eE(e)}})]})};function a3(){return(0,s.jsx)(a5,{})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[4,277,222,870,441,684,358],()=>t(4237)),_N_E=e.O()}]);